{"version":3,"sources":["controllers/ProSetSoonest/ProSetSoonest.controller.ts"],"names":[],"mappings":"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","file":"controllers/ProSetSoonest/ProSetSoonest.controller.js","sourcesContent":["module ProSetSoonestController {\r\n\r\n    class ProSetSoonestController {\r\n        uiConfig: any;\r\n        static $inject = ['$q', '$state', '$scope', '$location', 'CustomerHttp', '$window', 'SharedHttp', \"$stateParams\"];\r\n        AddressID: number;\r\n        ClientID: number;\r\n        ProviderID: number;\r\n        AppID: number;\r\n        name: string;\r\n        staticEvents: any;\r\n        message: string;\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp,\r\n            private $stateParams: angular.ui.IStateParamsService\r\n        ) {\r\n            var self = this;\r\n            self.AddressID = $stateParams.AddressID;\r\n            self.ClientID = $stateParams.ClientID;\r\n            self.ProviderID = $stateParams.ProviderID;\r\n            self.AppID = $stateParams.AppID;\r\n            self.name = $stateParams.Name1;\r\n            self.uiConfig = {\r\n                calendar: {\r\n                    height: 450,\r\n                    editable: true,\r\n                    header: {\r\n\r\n\r\n                        right: 'today prev,next'\r\n                    },\r\n                    dayClick: function (date: any, jsEvent: any, view: any) {\r\n                     \r\n                        var selectedDate = moment(date).format('YYYY-MM-DD');\t\t\t\t    // set dateFrom based on user click on calendar\r\n                        self.staticEvents[0].events.push({\r\n                            start: selectedDate, allday: true,\r\n                            dateField: moment(date).format('MMM DD'),\r\n                            dateFieldHidden: moment(date).format('MM/DD/YYYY'),\r\n                            proId: 0,\r\n                            color: '#008000'\r\n\r\n                        });\t\t\t\t \r\n                    },\r\n                   \r\n                }\r\n\r\n            };\r\n            self.staticEvents =\r\n                [\r\n                    // your event source\r\n                    {\r\n                    events: [],\r\n                        color: 'green',     // an option!\r\n                        textColor: 'black' // an option!\r\n                    }];\r\n           \r\n\r\n        }\r\n        deleteEvent($index: any)\r\n        {\r\n         \r\n            var self = this;\r\n            self.staticEvents[0].events.splice($index, 1);\r\n        }\r\n        setDetails()\r\n        {\r\n           \r\n            var self = this;\r\n            var data = {};\r\n            if (data == 0) {\r\n             \r\n                this.message = \"Add a event to proceed\";\r\n                $(\"#PDone\").modal(\"toggle\");\r\n                return;\r\n            }\r\n            for (var i = 0; i < self.staticEvents[0].events.length; i++) {\r\n                if (!self.staticEvents[0].events[i].hasOwnProperty('endTime') ) {\r\n                    self.message = \"Choose time on respective date\";\r\n                    $(\"#PDone\").modal(\"toggle\");\r\n                    return;\r\n\r\n                }\r\n                if (!self.staticEvents[0].events[i].hasOwnProperty('startTime'))\r\n                {\r\n                    self.message = \"Choose time on respective date\";\r\n                    $(\"#PDone\").modal(\"toggle\");\r\n                    return;\r\n                }\r\n                var date1 = new Date(self.staticEvents[0].events[i].startTime);\r\n                var date2 = new Date(self.staticEvents[0].events[i].endTime);\r\n                //  alert(\"date1\" + date1 + \"date2\" + date2);\r\n                if (date2 <= date1) {\r\n                    this.message = \"Start date is greater than end date\";\r\n                    $(\"#PDone\").modal(\"toggle\");\r\n                    return;\r\n                }\r\n            }\r\n            for (var i = 0; i < self.staticEvents[0].events.length; i++)\r\n            {\r\n                var datestart = new Date(self.staticEvents[0].events[i].startTime);\r\n                var dateend = new Date(self.staticEvents[0].events[i].endTime);\r\n                var startResult = 0;\r\n                var endResult = 0;\r\n                var start = '';\r\n                var end = '';\r\n                if (datestart.getHours() >= 12) {\r\n                    startResult = datestart.getHours() - 12;\r\n                    start = startResult + \":\" + datestart.getMinutes() + \" PM\";\r\n                }\r\n                else {\r\n                    start = startResult + \":\" + datestart.getMinutes() + \" AM\";\r\n                }\r\n                if (dateend.getHours() >= 12) {\r\n                    endResult = dateend.getHours() - 12;\r\n                    end = endResult + \":\" + dateend.getMinutes() + \" PM\";\r\n                }\r\n                else {\r\n                    end = endResult + \":\" + dateend.getMinutes() + \" AM\";\r\n                }\r\n\r\n                data = { AddressID: self.AddressID, AppID: self.AppID, AtTime: start, ClientID: self.ClientID, Comment: \"\", EndTime: end, ForDate: self.staticEvents[0].events[i].dateFieldHidden, ProviderID: self.ProviderID };  \r\n      \r\n                self.CustomerHttp.post(data, \"/UpdateAppBasicInfo\").then(function (res: any) {\r\n                  \r\n                \r\n                    self.CustomerHttp.get(\"/UpdateAppStatus/\" + res + \"/5\").then(function () {\r\n                        self.$state.go(\"ProAppointments\");\r\n                    });\r\n                  \r\n                });\r\n            }\r\n            \r\n            \r\n        }\r\n    }\r\n\r\n        \r\n\r\n\r\n    angular.module('spafoo.ctrl.ProSetSoonest', []).controller('ProSetSoonest',ProSetSoonestController);\r\n\r\n}\r\n\r\n "],"sourceRoot":"/source/"}