{"version":3,"sources":["controllers/Pro-Appointments/ProAppointments.controller.ts"],"names":[],"mappings":"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","file":"controllers/Pro-Appointments/ProAppointments.controller.js","sourcesContent":["module ProAppointmentsController {\r\n\r\n    class ProAppointmentsController {\r\n        UserID: any;\r\n        ServiceData: any;\r\n        isRated: boolean;\r\n        page: string;\r\n\r\n        static $inject = ['$q', '$state', '$scope', '$location', 'CustomerHttp', '$window', 'SharedHttp'];\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp\r\n        ) {\r\n            \r\n            this.UserID = this.$window.localStorage.getItem('CustomerID');\r\n            this.getProviderSchedular(this.UserID);\r\n            this.page = window.location.hash.split('/')[1];\r\n        }\r\n\r\n        getProviderSchedular(UserID: any) {\r\n            var self = this;\r\n            var status = self.$window.localStorage.getItem('LoginStatus');\r\n            if (status === null || status === 'false' || status === false || status === undefined || status === 'undefined' || status === '') {\r\n                self.$state.go('login');\r\n            }\r\n            self.CustomerHttp.get('/ListAppointmentByProvider/' + UserID).then(function (response: any) {\r\n                self.ServiceData = response.ListAppointmentByProviderResult;\r\n                $.each(self.ServiceData, function (i, item) {\r\n                    if (item.forDateField === 'undefined' || item.forDateField === undefined || item.forDateField === null || item.forDateField === '') {\r\n                        self.ServiceData[i].orderDateField = '';\r\n                        self.ServiceData[i].DayField = 'ASAP';\r\n                       // self.ServiceData[i].MonthField = '-- -- --';\r\n                    } else {\r\n                        var orderdt = self.SharedHttp.getFormatedDate(item.forDateField, \"weekday dd MMMM yyyy\");\r\n                        self.ServiceData[i].orderDateField = orderdt;\r\n                        self.ServiceData[i].DayField = orderdt.split(' ')[1];\r\n                        self.ServiceData[i].MonthField = orderdt.split(' ')[2];\r\n                    }\r\n\r\n                    if (item.atTimeField === 'undefined' || item.atTimeField === undefined || item.atTimeField === null || item.atTimeField === '') {\r\n                    //    self.ServiceData[i].atTimeField = '00:00 --'\r\n                        self.ServiceData[i].atTimeField = 'Request'\r\n                    }\r\n                    //else {\r\n                    //    self.ServiceData[i].atTimeField = self.SharedHttp.getFormatedTime(item.atTimeField);\r\n                    //}\r\n                    var serviceName = \"\";\r\n                    var serviceTime = 0;\r\n                    $.each(item.servicesField, function (ig, sitem) {\r\n                        if (parseInt(sitem.qtyField) > 1) {\r\n                            serviceName += sitem.serviceNameField + \"(\" + sitem.qtyField + \"),\";\r\n                            serviceTime += sitem.qtyField * sitem.durationField;\r\n                        }\r\n                        else {\r\n                            serviceName += sitem.serviceNameField + \",\";\r\n                            serviceTime += sitem.durationField;\r\n                        }\r\n                    });\r\n                    self.ServiceData[i].ServiceList = serviceName.substr(0, serviceName.lastIndexOf(','));\r\n                    self.ServiceData[i].serviceTime = serviceTime;\r\n\r\n                    self.SharedHttp.GetUserInfo(item.clientIDField).then(function (res: any) {\r\n                        self.ServiceData[i].displayNameField = res.firstNameField + \" \" + res.lastNameField[0] + \".\";;\r\n                        self.ServiceData[i].userIDField = res.userIDField;\r\n                      if (self.ServiceData[i].statusField == 1) {//self.ServiceData[i].clientIDField\r\n                          self.CustomerHttp.get('/DidIRated/' + UserID+ '/' + self.ServiceData[i].appointmentIDField).then(function (res: any) {\r\n                                self.ServiceData[i].isRate = res.DidIRatedResult;\r\n                            }, function (error: any) {});\r\n                        }\r\n                    });\r\n                    self.SharedHttp.GetAddressInfo(item.appointmentIDField).then(function (e: any) { self.ServiceData[i].addressField = e; });\r\n                });\r\n            }, function (error) {});\r\n        }\r\n\r\n        RemoveCancelled(AppointmentID: any) {\r\n            var conf = confirm(\"Are you sure want to remove ?\");\r\n            if (conf) {\r\n                var self = this;\r\n                self.CustomerHttp.get('/RemoveApp/' + AppointmentID).then(function (response: any) {\r\n                    //alert(JSON.stringify(response));\r\n                    //    alert(self.UserID);\r\n                    self.getProviderSchedular(self.UserID);\r\n\r\n                }, function (error) {\r\n                });\r\n            }\r\n        }\r\n        HideApp4Me(AppID: any) {                         \r\n           var conf = confirm(\"Are you sure want to remove ?\");\r\n           if (conf) {\r\n               var self = this;  \r\n               var UserType = self.$window.localStorage.getItem('Role');     \r\n               self.SharedHttp.HideApp4Me(AppID, UserType).then(function (e: any) {\r\n                 \r\n                   if (e.HideApp4MeResult.Success == \"Removed Successfully\") {\r\n                       self.getProviderSchedular(self.UserID);\r\n                   }\r\n               });\r\n           }\r\n\r\n        }\r\n\r\n        acceptAppointment(data: any) {\r\n            var self = this;\r\n            self.CustomerHttp.get(\"/UpdateAppStatus/\" + data + \"/0\").then(function (res) { self.getProviderSchedular(self.UserID); });\r\n        }\r\n        denyAppointment(data: any) {\r\n            var confirmations = confirm(\"Are you sure to deny this appointment ? \");\r\n            if (confirmations) {\r\n                var self = this;\r\n                self.CustomerHttp.get(\"/UpdateAppStatus/\" + data + \"/6\").then(function (res) { self.getProviderSchedular(self.UserID); });\r\n            }\r\n        } \r\n        \r\n        acceptAnyProviderAppointment(appID: any) {\r\n            var self = this;\r\n            self.CustomerHttp.get(\"/AcceptAppointment/\" + this.UserID + \"/\"+ appID).then(function (res) { self.getProviderSchedular(self.UserID); });\r\n        }\r\n        UnavailableAnyProviderAppointment(appID: any) {\r\n            var confirmations = confirm(\"Are you sure to deny this appointment ? \");\r\n            if (confirmations) {\r\n                var self = this;\r\n                self.CustomerHttp.get(\"/Unavailable4Appointment/\" + this.UserID  + \"/\"+appID).then(function (res) { self.getProviderSchedular(self.UserID); });\r\n            }\r\n        }\r\n        ProviderDenyASAP(data: any) {\r\n            var confirmations = confirm(\"Are you sure to deny this appointment ? \");\r\n            if (confirmations) {\r\n                var self = this;             \r\n                self.CustomerHttp.get(\"/ProviderDenyASAP/\" + data ).then(function (res) { self.getProviderSchedular(self.UserID); });\r\n            }\r\n        }\r\n        //UnSeenStatus(AppointmentID: any) {\r\n        //    var self = this;\r\n        //    self.CustomerHttp.get('/UpdateAppSeenStatus/' + AppointmentID).then(function (response: any) {\r\n        //        //alert(JSON.stringify(response));\r\n        //        //    self.getProviderSchedular(this.UserID);\r\n\r\n        //    }, function (error) {\r\n        //    });\r\n        //}\r\n        GoToProviderPortfolio(UserID: any) {\r\n            var self = this;\r\n            self.$window.localStorage.setItem('ProviderIDs', UserID);\r\n            self.$state.go(\"ProviderPortfolio\");\r\n        }\r\n        GoToScheduleDetail(AppointmentID: any) {\r\n            var self = this;\r\n            self.SharedHttp.UnSeenStatus(AppointmentID)\r\n            self.$window.localStorage.setItem('AppointmentIDs', AppointmentID);\r\n            self.$state.go(\"ProAppointmentDetail\");\r\n        }\r\n        GoToProviderReview(userid: any) {\r\n            //alert(\"called\" + userid);\r\n            var self = this;\r\n            self.$state.go('ProReviewListing', { userId: userid });\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.ProAppointments', []).controller('ProAppointments', ProAppointmentsController);\r\n\r\n}"],"sourceRoot":"/source/"}