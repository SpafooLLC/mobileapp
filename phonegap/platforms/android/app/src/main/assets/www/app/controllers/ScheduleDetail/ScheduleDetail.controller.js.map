{"version":3,"sources":["controllers/ScheduleDetail/ScheduleDetail.controller.ts"],"names":[],"mappings":"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","file":"controllers/ScheduleDetail/ScheduleDetail.controller.js","sourcesContent":["module ScheduleDetailController {\n\n    class ScheduleDetailController {\n\n        AppointmentID: number;\n        ServiceData: any;\n        authTxnIDField: any;\n        amountField: any;\n        messages: any;\n        static $inject = ['$q', '$state', '$scope', '$location', 'CustomerHttp', '$window', 'SharedHttp'];\n        constructor(\n            private $q: ng.IQService,\n            private $state: angular.ui.IStateService,\n            private $scope: ng.IScope,\n            private $location: ng.ILocationService,\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\n            private $window: ng.IWindowService,\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp\n        ) {\n            this.AppointmentID = this.$window.localStorage.getItem('AppointmentIDs');\n            this.getScheduleDetail(this.AppointmentID);\n        }\n\n        getScheduleDetail(AppointmentID: any) {\n            var self = this;\n            self.CustomerHttp.get('/GetAppointment/' + AppointmentID).then(function (response: any) {\n                self.ServiceData = response.GetAppointmentResult;\n\n                var orderdt = self.SharedHttp.getFormatedDate(self.ServiceData.forDateField, \"weekday dd MMMM yyyy\");\n                self.ServiceData.orderDateField = orderdt;\n                self.ServiceData.atTimeField = self.SharedHttp.getFormatedTime(self.ServiceData.atTimeField);\n                self.ServiceData.DayField = orderdt.split(' ')[1];\n                self.ServiceData.MonthField = orderdt.split(' ')[2];\n                self.amountField = self.ServiceData.amountField;\n                self.authTxnIDField = self.ServiceData.authTxnIDField;\n                self.SharedHttp.GetAddressInfo(self.ServiceData.appointmentIDField).then(function (e: any) {\n          \r\n                    self.ServiceData.addressField =self.SharedHttp.getAddressDetailRcd() ;\r\n                });\n                var serviceName = \"\";\n                $.each(self.ServiceData.servicesField, function (ig, sitem) {\n                 //   serviceName += sitem.serviceNameField + \",\";\n                    if (parseInt(sitem.qtyField) > 1) {\r\n                        serviceName += sitem.serviceNameField + \"(\" + sitem.qtyField + \"),\";\r\n                    }\r\n                    else {\r\n                        serviceName += sitem.serviceNameField + \",\";\r\n                    }\n                });\n                self.ServiceData.ServiceList = serviceName.substr(0, serviceName.lastIndexOf(','));\n                self.SharedHttp.GetUserInfo(self.ServiceData.providerIDField).then(function (res: any) {\n                    self.ServiceData.displayNameField = res.firstNameField + \" \" + res.lastNameField[0] + \".\";\n                    self.SharedHttp.getProfilePics(res.profileField.photoField).then(function (imgres) { self.ServiceData.profilePic = imgres; });\n                });\n            }, function (error) {\n            });\n        }\n\n        CancelSchdule() {\n            var confirmations = confirm(\"Are you sure want to cancel ? \");\r\n            if (confirmations) {\n                var self = this;\n                var PostData = { 'AID': this.AppointmentID, 'TxnID': this.authTxnIDField, 'Amount': this.amountField };\n                //  alert(JSON.stringify(PostData));\n                self.CustomerHttp.post(PostData, '/RefundCard').then(function (response: any) {\n                    self.messages = JSON.parse(response).messages.message[0].text;\n                    $(\"#PDone\").modal();\n                }, function (error) {\n                    //alert(error)\n                });\r\n            }\n        }\n\n        dismissAndThen(){\n         // return false;\n           this.$state.go('MySchedule');\n        }\n\n\n    }\n\n\n    angular.module('spafoo.ctrl.ScheduleDetail', []).controller('ScheduleDetail', ScheduleDetailController);\n\n}\n"],"sourceRoot":"/source/"}