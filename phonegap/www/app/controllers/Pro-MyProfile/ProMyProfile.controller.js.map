<<<<<<< HEAD
{"version":3,"sources":["controllers/Pro-MyProfile/ProMyProfile.controller.ts"],"names":[],"mappings":"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","file":"controllers/Pro-MyProfile/ProMyProfile.controller.js","sourcesContent":["module ProMyProfileController {\r\n\r\n    class ProMyProfileController {\r\n        ServiceData: {};\r\n        NotificaitonData: {};\r\n        proProfilePic: string;\r\n        NotificationCount: number;\r\n        WorkSamplesList:{};\r\n        Roles: any;\r\n        rolePosition: any;\r\n        applRole: any;\r\n        serviceOffered: any;\r\n        static $inject = ['$q', '$state', '$ionicPopup', '$ionicLoading', '$scope', '$location', 'CustomerHttp', '$window', 'toaster', 'SharedHttp'];\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $ionicPopup: ionic.popup.IonicPopupService,\r\n            private $ionicLoading: ionic.loading.IonicLoadingService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private toaster: ngtoaster.IToasterService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp\r\n        ) {\r\n            this.getUserInfo();\r\n            $('.fancybox').fancybox();\r\n          \r\n        }\r\n        getUserInfo() {\r\n\r\n            var self = this;\r\n            var status= self.$window.localStorage.getItem('LoginStatus');\r\n            if(status === null || status === 'false' || status === false || status === undefined || status === 'undefined' || status === ''){\r\n                self.$state.go('login');\r\n            }\r\n            var customerID = self.$window.localStorage.getItem('CustomerID');\r\n            self.CustomerHttp.get('/GetUserJSON/' + customerID).then(function (response: any) {\r\n                self.ServiceData = JSON.parse(response.GetUserJSONResult);\r\n                //console.log(self.ServiceData);\r\n                self.ServiceData.Membership.CreatedDate = self.SharedHttp.getFormatedDate(self.ServiceData.Membership.CreatedDate, \"dd MMMM yyyy\");\r\n                self.getUserNotificationInfo(customerID);\r\n                var str = self.ServiceData.Profile.Biography;\r\n                var uri_encoded = str.replace(/%([^\\d].)/, \"%25$1\");                \r\n                var decoded = decodeURIComponent(uri_encoded);\r\n                self.ServiceData.Profile.Biography = decoded;\r\n                self.SharedHttp.getProfilePics(self.ServiceData.Profile.Photo).then(function (imgres) { self.proProfilePic = imgres;});\r\n                self.SharedHttp.GetWorkSamples(customerID).then(function (res) { self.WorkSamplesList = res; });\r\n                self.rolePosition = self.ServiceData.Profile.ProfileProperties[1].PropertyValue.split('|').map(Number);\r\n                self.getRoles().then(function (res: any) {\r\n                    self.Roles = res;\r\n                    var rArr = new Array();\r\n                    for (var i = 0; i < self.Roles.GetQuestionResult.optionsField.length; i++) {\r\n                        if (self.rolePosition.indexOf(self.Roles.GetQuestionResult.optionsField[i].onSelectField) > -1) {\r\n                            rArr.push(self.Roles.GetQuestionResult.optionsField[i].optionTextField);\r\n                            //console.log(self.Roles.GetQuestionResult.optionsField[i].optionTextField);\r\n                        }\r\n                    }\r\n                    //console.log(rArr)\r\n                    self.applRole = rArr;\r\n                }, function (error) {\r\n                    //alert(error);\r\n                    });           \r\n               self.CustomerHttp.get('/GetProviderServices/' + customerID).then( function(res:any) {\r\n                   self.serviceOffered = res.GetProviderServicesResult;\r\n               }, function(err: any) {\r\n\r\n               })                          \r\n               \r\n\r\n            }, function (error) {\r\n                if (error === null) {\r\n\r\n                } else {\r\n                    //console.log(error);\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n        getRoles(): ng.IPromise<string> {\r\n            var self=this;\r\n            var deferred = this.$q.defer();\r\n            self.CustomerHttp.get('/GetQuestion/5').then(function(res:any){\r\n                deferred.resolve(res);\r\n            },function(error:any){\r\n                deferred.reject(error);\r\n            })\r\n            \r\n            return deferred.promise;\r\n        }\r\n\r\n\r\n        getUserNotificationInfo(customerID: any) {\r\n            var self = this;\r\n            self.CustomerHttp.get('/GetMyNotification/' + customerID).then(function (response: any) {\r\n                self.NotificaitonData = response.GetMyNotificationResult;\r\n                self.NotificationCount = self.NotificaitonData.length;\r\n\r\n            }, function (error) {\r\n                if (error === null) {\r\n                    //self.$ionicLoading.hide();\r\n                } else {\r\n                    console.log(error);\r\n                    //self.$ionicLoading.hide();\r\n                }\r\n            });\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.ProMyProfile', []).controller('ProMyProfile', ProMyProfileController);\r\n\r\n}"],"sourceRoot":"/source/"}
=======
{"version":3,"sources":["controllers/Pro-MyProfile/ProMyProfile.controller.ts"],"names":[],"mappings":"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","file":"controllers/Pro-MyProfile/ProMyProfile.controller.js","sourcesContent":["module ProMyProfileController {\r\n\r\n    class ProMyProfileController {\r\n        ServiceData: {};\r\n        NotificaitonData: {};\r\n        proProfilePic: string;\r\n        NotificationCount: number;\r\n        WorkSamplesList:{};\r\n        Roles: any;\r\n        rolePosition: any;\r\n        applRole: any;\r\n        serviceOffered: any;\r\n        static $inject = ['$q', '$state', '$ionicPopup', '$ionicLoading', '$scope', '$location', 'CustomerHttp', '$window', 'toaster', 'SharedHttp'];\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $ionicPopup: ionic.popup.IonicPopupService,\r\n            private $ionicLoading: ionic.loading.IonicLoadingService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private toaster: ngtoaster.IToasterService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp\r\n        ) {\r\n            this.getUserInfo();\r\n            $('.fancybox').fancybox();\r\n          \r\n        }\r\n        getUserInfo() {\r\n\r\n            var self = this;\r\n            var status= self.$window.localStorage.getItem('LoginStatus');\r\n            if(status === null || status === 'false' || status === false || status === undefined || status === 'undefined' || status === ''){\r\n                self.$state.go('login');\r\n            }\r\n            var customerID = self.$window.localStorage.getItem('CustomerID');\r\n            self.CustomerHttp.get('/GetUserJSON/' + customerID).then(function (response: any) {\r\n                self.ServiceData = JSON.parse(response.GetUserJSONResult);\r\n                //console.log(self.ServiceData);\r\n                self.ServiceData.DisplayName1 = self.ServiceData.FirstName + \" \" + self.ServiceData.LastName[0] + \".\";\r\n                self.ServiceData.Membership.CreatedDate = self.SharedHttp.getFormatedDate(self.ServiceData.Membership.CreatedDate, \"dd MMMM yyyy\");\r\n                self.getUserNotificationInfo(customerID);\r\n                var str = self.ServiceData.Profile.Biography;\r\n                var uri_encoded = str.replace(/%([^\\d].)/, \"%25$1\");                \r\n                var decoded = decodeURIComponent(uri_encoded);\r\n                self.ServiceData.Profile.Biography = decoded;\r\n                self.SharedHttp.getProfilePics(self.ServiceData.Profile.Photo).then(function (imgres) { self.proProfilePic = imgres;});\r\n                self.SharedHttp.GetWorkSamples(customerID).then(function (res) { self.WorkSamplesList = res; });\r\n                self.rolePosition = self.ServiceData.Profile.ProfileProperties[1].PropertyValue.split('|').map(Number);\r\n                self.getRoles().then(function (res: any) {\r\n                    self.Roles = res;\r\n                    var rArr = new Array();\r\n                    for (var i = 0; i < self.Roles.GetQuestionResult.optionsField.length; i++) {\r\n                        if (self.rolePosition.indexOf(self.Roles.GetQuestionResult.optionsField[i].onSelectField) > -1) {\r\n                            rArr.push(self.Roles.GetQuestionResult.optionsField[i].optionTextField);\r\n                            //console.log(self.Roles.GetQuestionResult.optionsField[i].optionTextField);\r\n                        }\r\n                    }\r\n                    //console.log(rArr)\r\n                    self.applRole = rArr;\r\n                }, function (error) {\r\n                    //alert(error);\r\n                    });           \r\n               self.CustomerHttp.get('/GetProviderServices/' + customerID).then( function(res:any) {\r\n                   self.serviceOffered = res.GetProviderServicesResult;\r\n               }, function(err: any) {\r\n\r\n               })                          \r\n               \r\n\r\n            }, function (error) {\r\n                if (error === null) {\r\n\r\n                } else {\r\n                    //console.log(error);\r\n\r\n                }\r\n            });\r\n        }\r\n\r\n        getRoles(): ng.IPromise<string> {\r\n            var self=this;\r\n            var deferred = this.$q.defer();\r\n            self.CustomerHttp.get('/GetQuestion/5').then(function(res:any){\r\n                deferred.resolve(res);\r\n            },function(error:any){\r\n                deferred.reject(error);\r\n            })\r\n            \r\n            return deferred.promise;\r\n        }\r\n\r\n\r\n        getUserNotificationInfo(customerID: any) {\r\n            var self = this;\r\n            self.CustomerHttp.get('/GetMyNotification/' + customerID).then(function (response: any) {\r\n                self.NotificaitonData = response.GetMyNotificationResult;\r\n                self.NotificationCount = self.NotificaitonData.length;\r\n\r\n            }, function (error) {\r\n                if (error === null) {\r\n                    //self.$ionicLoading.hide();\r\n                } else {\r\n                    console.log(error);\r\n                    //self.$ionicLoading.hide();\r\n                }\r\n            });\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.ProMyProfile', []).controller('ProMyProfile', ProMyProfileController);\r\n\r\n}"],"sourceRoot":"/source/"}
>>>>>>> refs/remotes/origin/PawanBranch
