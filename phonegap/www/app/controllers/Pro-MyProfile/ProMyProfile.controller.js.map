{"version":3,"sources":["controllers/Pro-MyProfile/ProMyProfile.controller.ts"],"names":[],"mappings":"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","file":"controllers/Pro-MyProfile/ProMyProfile.controller.js","sourcesContent":["module ProMyProfileController {\r\n\r\n    class ProMyProfileController {\r\n     \r\n        UserID: number;\r\n        ServiceData: any;\r\n        profilePic: string;\r\n        RatingField: string;\r\n        Rateperson: string;\r\n        TagField: string;\r\n        ProviderServiceList: any;\r\n        WorkSamplesList: any;\r\n        distance: string;ReviewData:any;\r\n        customerType: string;     \r\n      //  ServiceData: {};\r\n        NotificaitonData: [];\r\n        proProfilePic: string;\r\n        NotificationCount: number;\r\n        // WorkSamplesList:{};\r\n        Roles: any;\r\n        rolePosition: any;\r\n        applRole: any;\r\n        serviceOffered: any;\r\n        static $inject = ['$q', '$state', '$ionicPopup', '$ionicLoading', '$scope', '$location', 'CustomerHttp', '$window', 'toaster', 'SharedHttp'];\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $ionicPopup: ionic.popup.IonicPopupService,\r\n            private $ionicLoading: ionic.loading.IonicLoadingService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private toaster: ngtoaster.IToasterService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp\r\n        ) {\r\n            this.getUserInfo();\r\n            $('.fancybox').fancybox();\r\n          \r\n        }\r\n\r\n        showTab(tabname:any){\r\n            $(\".tab-pane.fade\").removeClass(\"in\").removeClass(\"active\");    \r\n          $(\"#\"+tabname).addClass(\"in\").addClass(\"active\");\r\n        \r\n        }\r\n        GoRegistertext() { \r\n            var target = \"_blank\";\r\n\r\n            var options = \"location=yes,hidden=yes,beforeload=yes\";\r\n            $(\"#showload\").show();\r\n             window.open(encodeURI('http://www.spafoo.com/provider-registration'), '_system', 'location=yes');\r\n            setTimeout(() => {\r\n                $(\"#showload\").hide();\r\n            }, 15000);\r\n        }\r\n        getUserInfo() {\r\n\r\n            var self = this;\r\n            var status= self.$window.localStorage.getItem('LoginStatus');\r\n            if(status === null || status === 'false'  || status === undefined || status === 'undefined' || status === ''){\r\n                self.$state.go('login');\r\n            }\r\n            var UserID = self.$window.localStorage.getItem('CustomerID');\r\n            self.CustomerHttp.get('/GetUserInfo/' + UserID).then(function (response: any) {\r\n                self.ServiceData = response.GetUserInfoResult;\r\n                self.ServiceData.displayNameField = self.ServiceData.firstNameField + \" \" + self.ServiceData.lastNameField[0] + \".\";\r\n                 self.SharedHttp.getProfilePics(self.ServiceData.profileField.photoField).then(function (imgres) { self.profilePic = imgres; });\r\n                 self.SharedHttp.GetMyRating(UserID).then(function (res) { self.RatingField = res.split(':')[0] ; self.Rateperson = res.split(':')[1] });\r\n                self.SharedHttp.GetProTagLine(UserID).then(function (res) { self.TagField = res; });\r\n                self.SharedHttp.GetProviderServices(UserID).then(function (res) {self.ProviderServiceList = res; });\r\n                self.SharedHttp.GetWorkSamples(UserID).then(function (res) { self.WorkSamplesList = res; });\r\n             \r\n                var str = self.ServiceData.profileField.biographyField;\r\n                var uri_encoded =str!=null? str.replace(/%([^\\d].)/, \"%25$1\"):\"\";                \r\n                var decoded = decodeURIComponent(uri_encoded);\r\n                self.ServiceData.profileField.biographyField = decoded;\r\n                 \r\n               \r\n                 //self.GetProviderServices(UserID)\r\n\r\n                //alert(decodeURI(self.ServiceData.profileField.biographyField));\r\n            }, function (error) {\r\n                if (error === null) {\r\n\r\n                } else {\r\n                    console.log(error);\r\n\r\n                }\r\n            });\r\n\r\n           \r\n           \r\n            // self.CustomerHttp.get('/GetUserJSON/' + customerID).then(function (response: any) {\r\n            //     self.ServiceData = JSON.parse(response.GetUserJSONResult);\r\n            //     //console.log(self.ServiceData);\r\n            //     self.ServiceData.DisplayName1 = self.ServiceData.FirstName + \" \" + self.ServiceData.LastName[0] + \".\";\r\n            //     self.ServiceData.Membership.CreatedDate = self.SharedHttp.getFormatedDate(self.ServiceData.Membership.CreatedDate, \"dd MMMM yyyy\");\r\n            //     self.getUserNotificationInfo(customerID);\r\n            //     var str = self.ServiceData.Profile.Biography;\r\n            //     var uri_encoded = str.replace(/%([^\\d].)/, \"%25$1\");                \r\n            //     var decoded = decodeURIComponent(uri_encoded);\r\n            //     self.ServiceData.Profile.Biography = decoded;\r\n            //     self.SharedHttp.getProfilePics(self.ServiceData.Profile.Photo).then(function (imgres) { self.proProfilePic = imgres;});\r\n            //     self.SharedHttp.GetWorkSamples(customerID).then(function (res) { self.WorkSamplesList = res; });\r\n            //     self.rolePosition = self.ServiceData.Profile.ProfileProperties[1].PropertyValue.split('|').map(Number);\r\n            //     self.getRoles().then(function (res: any) {\r\n            //         self.Roles = res;\r\n            //         var rArr = new Array();\r\n            //         for (var i = 0; i < self.Roles.GetQuestionResult.optionsField.length; i++) {\r\n            //             if (self.rolePosition.indexOf(self.Roles.GetQuestionResult.optionsField[i].onSelectField) > -1) {\r\n            //                 rArr.push(self.Roles.GetQuestionResult.optionsField[i].optionTextField);\r\n            //                 //console.log(self.Roles.GetQuestionResult.optionsField[i].optionTextField);\r\n            //             }\r\n            //         }\r\n            //         //console.log(rArr)\r\n            //         self.applRole = rArr;\r\n            //     }, function (error) {\r\n            //         //alert(error);\r\n            //         });           \r\n            //    self.CustomerHttp.get('/GetProviderServices/' + customerID).then( function(res:any) {\r\n            //        self.serviceOffered = res.GetProviderServicesResult;\r\n            //    }, function(err: any) {\r\n\r\n            //    })                          \r\n               \r\n\r\n            // }, function (error) {\r\n            //     if (error === null) {\r\n\r\n            //     } else {\r\n            //         //console.log(error);\r\n\r\n            //     }\r\n            // });\r\n        }\r\n\r\n        getRoles(): ng.IPromise<string> {\r\n            var self=this;\r\n            var deferred = this.$q.defer();\r\n            self.CustomerHttp.get('/GetQuestion/5').then(function(res:any){\r\n                deferred.resolve(res);\r\n            },function(error:any){\r\n                deferred.reject(error);\r\n            })\r\n            \r\n            return deferred.promise;\r\n        }\r\n\r\n        getReviewDetails(UserID: any) {\r\n            var self = this;\r\n            self.CustomerHttp.get('/GetMyReview/' + UserID).then(function (response: any) {\r\n                self.ReviewData = response.GetMyReviewResult;\r\n                $.each(self.ReviewData, function (i, item) {\r\n                    var str = item.commentsField;\r\n                    var uri_encoded = str.replace(/%([^\\d].)/, \"%25$1\");\r\n\r\n                    self.ReviewData[i].commentsField = decodeURIComponent(uri_encoded);\r\n                    self.ReviewData[i].datedField = self.SharedHttp.getFormatedDate(item.datedField, \"MM/dd/yyyy\");\r\n\r\n\r\n                    self.SharedHttp.GetUserInfo(item.byUserIDField).then(function (res: any) {\r\n\r\n                        switch (self.ReviewData[i].displayNameField) {\r\n                            case 1: self.ReviewData[i].displayNameField = res.firstNameField + \" \" + res.lastNameField[0] + \".\"; break;\r\n                            case 2: self.ReviewData[i].displayNameField = res.firstNameField; break;\r\n                            case 3: self.ReviewData[i].displayNameField = res.lastNameField; break;\r\n                            case 4: self.ReviewData[i].displayNameField = res.firstNameField + \" \" + res.lastNameField; break;\r\n                         \r\n\r\n                        }\r\n                        // self.ReviewData[i].displayNameField = res.displayNameField;\r\n\r\n                        self.ReviewData[i].RegionField = res.profileField.regionField;\r\n\r\n                    });\r\n\r\n                });\r\n\r\n            }, function (error) {\r\n                if (error === null) {\r\n\r\n                } else {\r\n                    //console.log(error);\r\n\r\n                }\r\n            });\r\n        }\r\n        getUserNotificationInfo(customerID: any) {\r\n            var self = this;\r\n            self.CustomerHttp.get('/GetMyNotification/' + customerID).then(function (response: any) {\r\n                self.NotificaitonData = response.GetMyNotificationResult;\r\n                self.NotificationCount = self.NotificaitonData.length;\r\n\r\n            }, function (error) {\r\n                if (error === null) {\r\n                    //self.$ionicLoading.hide();\r\n                } else {\r\n                    console.log(error);\r\n                    //self.$ionicLoading.hide();\r\n                }\r\n            });\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.ProMyProfile', []).controller('ProMyProfile', ProMyProfileController);\r\n\r\n}"],"sourceRoot":"/source/"}