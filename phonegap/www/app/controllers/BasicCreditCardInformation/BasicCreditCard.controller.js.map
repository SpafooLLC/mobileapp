{"version":3,"sources":["controllers/BasicCreditCardInformation/BasicCreditCard.controller.ts"],"names":[],"mappings":"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","file":"controllers/BasicCreditCardInformation/BasicCreditCard.controller.js","sourcesContent":["module BasicCreditCardController {\r\n    export interface IBasicCreditCard {\r\n        SubmitCreditCardInfo(UID: string,\r\n            CCNumber: string,\r\n            Expiry: string,\r\n            CVV: string,\r\n            Email: string\r\n        ): void\r\n\r\n\r\n    }\r\n\r\n    interface IStateParams extends angular.ui.IStateParamsService {\r\n    }\r\n\r\n    class BasicCreditCardController implements IBasicCreditCard {\r\n        messages: string;\r\n        Succmesg: string;\r\n        from: string;\r\n        number:number;\r\n        data:any;\r\n        numbercvv:number;\r\n        isChecked:boolean;\r\n        static $inject = ['$q', '$state', '$ionicPopup', '$ionicLoading', '$scope', '$location', 'CustomerHttp', '$window', 'toaster', 'SharedHttp', '$stateParams'];\r\n\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $ionicPopup: ionic.popup.IonicPopupService,\r\n            private $ionicLoading: ionic.loading.IonicLoadingService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private toaster: ngtoaster.IToasterService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp,\r\n            private $stateParams: IStateParams\r\n        ) {\r\n            this.init();\r\n            \r\n        }\r\n\r\n        init() {\r\n            var self = this;\r\n            self.from = self.$stateParams.from;\r\n            self.isChecked = false;\r\n             var status= self.$window.localStorage.getItem('LoginStatus');\r\n            if(status === null || status === 'false' || status === false || status === undefined || status === 'undefined' || status === ''){\r\n                self.$state.go('login');\r\n            }\r\n        }\r\n\r\n        SubmitCreditCardInfo(CData: any) {\r\n            var self = this;\r\n            //alert(CData.PayLater)\r\n\r\n            if (self.isChecked == true)\r\n            {\r\n                self.$state.go(\"MyProfile\");\r\n            }\r\n        \r\n            else if (this.DoValidation(CData)) {\r\n                var data = CData;\r\n                data.UID = self.$window.localStorage.getItem('CustomerID');\r\n                data.Expiry = data.Month + \"/\" + data.Year; \r\n                self.$ionicLoading.show();\r\n                self.CustomerHttp.post(data, '/CreateCustomerProfile').then(function (response) {\r\n                                    \r\n                    self.Succmesg = \"Credit Card Information Added Successfully.\";\r\n                    $(\"#PSuccess\").modal();  \r\n                }, function (error) { });\r\n            }\r\n        }\r\n\r\n        redirectTo(href: any) {\r\n            this.SharedHttp.redirectTo(href, 'PSuccess');          \r\n        }\r\n        DoValidation(Regdata: any) {\r\n            var self = this;\r\n            if (Regdata == undefined) {\r\n                self.messages = \"Please Enter Credit Card Number.\";\r\n                $(\"#PDone\").modal();              \r\n                return false;\r\n            }\r\n            if (Regdata.CCNumber === null || Regdata.CCNumber === '' || Regdata.CCNumber == undefined) {\r\n                self.messages = \"Please Enter Credit Card Number.\";\r\n                $(\"#PDone\").modal();               \r\n                return false;\r\n            } else {\r\n                if(String(Regdata.CCNumber).length < 14){\r\n                    self.messages = \"The field length is invalid for Card Number.\";\r\n                    $(\"#PDone\").modal();\r\n                    return false; \r\n                }\r\n            }\r\n            if (Regdata.Month === null || Regdata.Month === '' || Regdata.Month == undefined) {\r\n                self.messages =\"Please Select Month.\" ;\r\n                $(\"#PDone\").modal();               \r\n                return false;\r\n            }\r\n            if (Regdata.Year === null || Regdata.Year === '' || Regdata.Year == undefined) {\r\n                self.messages = \"Please Select Year.\";\r\n                $(\"#PDone\").modal();             \r\n                return false;\r\n            } if (Regdata.CVV === null || Regdata.CVV === '' || Regdata.CVV == undefined) {\r\n                self.messages = \"Please Enter CVV.\";\r\n                $(\"#PDone\").modal();              \r\n                return false;\r\n            } \r\n            return true;\r\n        }\r\n        ValidateNumber( num: any, id:string ){\r\n            var self= this;\r\n            if(id=='cnum'){\r\n                if(isNaN(num)){\r\n                    self.data.CCNumber=self.number;\r\n                } else {\r\n                    self.data.CCNumber=num;\r\n                    self.number=num;\r\n                }\r\n            } else {\r\n                 if(isNaN(num)){\r\n                    self.data.CVV=self.numbercvv;\r\n                } else {\r\n                    self.data.CVV=num;\r\n                    self.numbercvv=num;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        checkStatus($event: any) {\r\n            var self=this;\r\n            if($event.target.checked) {\r\n                self.isChecked = true;\r\n            } else {\r\n                self.isChecked = false;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.BasicCreditCard', []).controller('BasicCreditCard', BasicCreditCardController);\r\n\r\n}"],"sourceRoot":"/source/"}