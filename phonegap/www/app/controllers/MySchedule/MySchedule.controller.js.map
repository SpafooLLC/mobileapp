{"version":3,"sources":["controllers/MySchedule/MySchedule.controller.ts"],"names":[],"mappings":"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","file":"controllers/MySchedule/MySchedule.controller.js","sourcesContent":["module MyScheduleController {\r\n\r\n    class MyScheduleController {\r\n        UserID: number;\r\n        ServiceData: any;\r\n\r\n\r\n        static $inject = ['$q', '$state', '$scope', '$location', 'CustomerHttp', '$window', 'SharedHttp'];\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp\r\n        ) {\r\n            var self = this;\r\n            self.UserID = this.$window.localStorage.getItem('CustomerID');\r\n            self.getClientSchedular(self.UserID);\r\n        }\r\n\r\n        getClientSchedular(UserID: any) {\r\n            var self = this;\r\n            var status= self.$window.localStorage.getItem('LoginStatus');\r\n            if(status === null || status === 'false' || status === false || status === undefined || status === 'undefined' || status === ''){\r\n                self.$state.go('login');\r\n            }\r\n            self.CustomerHttp.get('/ListAppointmentByClient/' + UserID).then(function (response: any) {\r\n                self.ServiceData = response.ListAppointmentByClientResult;\r\n                $.each(self.ServiceData, function (i, item) {\r\n                   \r\n                    var orderdt = self.SharedHttp.getFormatedDate(item.forDateField, \"weekday dd MMMM yyyy\");\r\n                    //self.ServiceData[i].orderDateField = orderdt;\r\n                    //self.ServiceData[i].atTimeField = self.SharedHttp.getFormatedTime(item.atTimeField);\r\n                    //self.ServiceData[i].DayField = orderdt.split(' ')[1];\r\n                    //self.ServiceData[i].MonthField = orderdt.split(' ')[2];\r\n                    if (item.forDateField === 'undefined' || item.forDateField === undefined || item.forDateField === null || item.forDateField === '') {\r\n                        self.ServiceData[i].orderDateField = '';\r\n                        self.ServiceData[i].DayField = '00';\r\n                        self.ServiceData[i].MonthField = '-- -- --';\r\n                    } else {\r\n                        var orderdt = self.SharedHttp.getFormatedDate(item.forDateField, \"weekday dd MMMM yyyy\");\r\n                        self.ServiceData[i].orderDateField = orderdt;\r\n                        self.ServiceData[i].DayField = orderdt.split(' ')[1];\r\n                        self.ServiceData[i].MonthField = orderdt.split(' ')[2];\r\n                    }\r\n\r\n                    if (item.atTimeField === 'undefined' || item.atTimeField === undefined || item.atTimeField === null || item.atTimeField === '') {\r\n                        self.ServiceData[i].atTimeField = '00:00 --'\r\n                    } else {\r\n                        self.ServiceData[i].atTimeField = self.SharedHttp.getFormatedTime(item.atTimeField);\r\n                    }\r\n\r\n\r\n                    var serviceName = \"\";\r\n                    $.each(item.servicesField, function (ig, sitem) {\r\n                \r\n                        if (parseInt(sitem.qtyField) > 1) {\r\n                          serviceName += sitem.serviceNameField + \"(\" + sitem.qtyField + \"),\";  \r\n                        }\r\n                        else {\r\n                            serviceName += sitem.serviceNameField + \",\";\r\n                        }\r\n                    });\r\n                    self.ServiceData[i].ServiceList = serviceName.substr(0, serviceName.lastIndexOf(','));\r\n                    self.SharedHttp.GetUserInfo(item.providerIDField).then(function (res: any) {\r\n                        self.ServiceData[i].displayNameField = res.firstNameField + \" \" + res.lastNameField[0]+\".\";\r\n                        if (self.ServiceData[i].statusField == 1) {\r\n                            self.CustomerHttp.get('/DidIRated/' + self.ServiceData[i].clientIDField + '/' + self.ServiceData[i].appointmentIDField).then(function (res: any) {\r\n                                self.ServiceData[i].isRate = res.DidIRatedResult;\r\n                            }, function (error: any) {\r\n\r\n                            });\r\n                        }\r\n                    });\r\n                    self.SharedHttp.GetAddressInfo(item.appointmentIDField).then(function (e: any) { self.ServiceData[i].addressField = e;   });\r\n                });\r\n            }, function (error) {\r\n            });\r\n        }\r\n\r\n        GoToProviderPortfolio(UserID: any) {\r\n            var self = this;\r\n            self.$window.localStorage.setItem('ProviderIDs', UserID);\r\n            self.$state.go(\"ProviderPortfolio\");\r\n        }\r\n\r\n        HideApp4Me(AppID: any) {\r\n            var conf = confirm(\"Are you sure want to remove ?\");\r\n            if (conf) {\r\n                var self = this;\r\n                var UserType = self.$window.localStorage.getItem('Role');\r\n                self.SharedHttp.HideApp4Me(AppID, UserType).then(function (e: any) {\r\n\r\n                    if (e.HideApp4MeResult.Success == \"Removed Successfully\") {\r\n                        self.getClientSchedular(self.UserID);\r\n                    }\r\n                });\r\n            }\r\n\r\n        }\r\n\r\n\r\n        GoToScheduleDetail(AppointmentID: any) {\r\n            var self = this;\r\n            self.$window.localStorage.setItem('AppointmentIDs', AppointmentID);\r\n            self.$state.go(\"ScheduleDetail\");\r\n        }\r\n        acceptAppointment(data: any)\r\n        {\r\n            var self = this;\r\n            self.CustomerHttp.get(\"/UpdateAppStatus/\" + data + \"/0\").then(function (res) { self.getClientSchedular(self.UserID); });\r\n        }\r\n        denyAppointment(data: any) {\r\n            var confirmations = confirm(\"Are you sure to deny this appointment ? \");\r\n            if (confirmations) {\r\n                var self = this;\r\n                self.CustomerHttp.get(\"/RemoveApp/\" + data).then(function (res: any) { self.getClientSchedular(self.UserID) });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.MySchedule', []).controller('MySchedule', MyScheduleController);\r\n\r\n}"],"sourceRoot":"/source/"}