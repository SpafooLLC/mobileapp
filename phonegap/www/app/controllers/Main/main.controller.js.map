{"version":3,"sources":["controllers/Main/main.controller.ts"],"names":[],"mappings":"AAAA,IAAO,cAAc,CA8HpB;AA9HD,WAAO,cAAc,EAAC,CAAC;IACnB;QAKI,wBACY,EAAgB,EAChB,MAAgC,EAChC,WAA0C,EAC1C,aAAgD,EAChD,MAAiB,EACjB,SAA8B,EAC9B,YAAoD,EACpD,OAA0B,EAC1B,OAAkC,EAClC,UAAe,EACf,UAAgD;YAVhD,OAAE,GAAF,EAAE,CAAc;YAChB,WAAM,GAAN,MAAM,CAA0B;YAChC,gBAAW,GAAX,WAAW,CAA+B;YAC1C,kBAAa,GAAb,aAAa,CAAmC;YAChD,WAAM,GAAN,MAAM,CAAW;YACjB,cAAS,GAAT,SAAS,CAAqB;YAC9B,iBAAY,GAAZ,YAAY,CAAwC;YACpD,YAAO,GAAP,OAAO,CAAmB;YAC1B,YAAO,GAAP,OAAO,CAA2B;YAClC,eAAU,GAAV,UAAU,CAAK;YACf,eAAU,GAAV,UAAU,CAAsC;YAGxD,IAAI,CAAC,UAAU,CAAC,eAAe,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;YACpF,IAAI,CAAC,UAAU,CAAC,cAAc,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,MAAM,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC;YAC7G,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;YACzF,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;YACrC,IAAI,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YACjE,IAAI,KAAK,GAAG,IAAI,CAAC;YACjB,EAAE,CAAC,CAAC,UAAU,IAAI,IAAI,CAAC,CAAC,CAAC;gBACrB,KAAK,CAAC,UAAU,CAAC,iBAAiB,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU,GAAQ,IAAI,KAAK,CAAC,UAAU,CAAC,WAAW,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5H,CAAC;YAED,IAAI,CAAC;gBACD,QAAQ,CAAC,gBAAgB,CAAC,aAAa,EAAE,KAAK,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;YAEzE,CACA;YAAA,KAAK,CAAC,CAAC,CAAC,CAAC,CACT,CAAC;YAED,CAAC;QAEL,CAAC;QAED,sCAAa,GAAb;YAEI,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC;gBAC5B,SAAS,CAAC,IAAI,EAAE,CAAC;YACrB,CAAC;YAED,IAAI,IAAI,GAAG,gBAAgB,CAAC,IAAI,CAAC;gBAC7B,OAAO,EAAE;oBACL,QAAQ,EAAE,aAAa;iBAC1B;gBACD,OAAO,EAAE;oBACL,cAAc,EAAE,sCAAsC;iBACzD;gBACD,GAAG,EAAE;oBACD,KAAK,EAAE,MAAM;oBACb,KAAK,EAAE,MAAM;oBACb,KAAK,EAAE,MAAM;iBAChB;gBACD,OAAO,EAAE,EAAE;aACd,CAAC,CAAC;YAEH,IAAI,CAAC,EAAE,CAAC,cAAc,EAAE,UAAU,IAAS;gBAC9C,6GAA6G;gBACtG,IAAI,CAAC;oBAED,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;oBACzD,YAAY,CAAC,OAAO,CAAC,YAAY,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC;gBACrD,CACA;gBAAA,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBACP,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC;gBAC3C,CAAC;YAEL,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,EAAE,CAAC,cAAc,EAAE,UAAU,IAAI;gBAClC,YAAY;gBAEZ,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC,CAAC;oBAClC,4CAA4C;oBAC5C,MAAM,CAAC,QAAQ,CAAC,IAAI,GAAG,gBAAgB,CAAC;gBAC5C,CAAC;gBACD,gBAAgB;gBAChB,cAAc;gBACd,cAAc;gBACd,cAAc;gBACd,cAAc;gBACd,sBAAsB;YAC1B,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,CAAC;gBACzB,wGAAwG;gBACvG,YAAY;YAChB,CAAC,CAAC,CAAC;QAEP,CAAC;QAGD,iCAAQ,GAAR;YACI,IAAI,CAAC,UAAU,CAAC,cAAc,GAAG,KAAK,CAAC;YAEvC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;YAC1D,IAAI,CAAC,UAAU,CAAC,eAAe,GAAG,mBAAmB,CAAC;YACtD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,cAAc,EAAE,mBAAmB,CAAC,CAAC;YACvE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAChD,IAAI,CAAC,UAAU,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC;YACzF,mHAAmH;YACnH,CAAC,CAAC,UAAU,CAAC,CAAC,KAAK,CAAC;gBAChB,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,CAAC;gBACpB,CAAC,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;YAC7C,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;QAC3B,CAAC;QAED,qCAAY,GAAZ;YACI,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,CAAC;YACpB,CAAC,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;QAC7C,CAAC;QAnHM,sBAAO,GAAG,CAAC,IAAI,EAAE,QAAQ,EAAE,aAAa,EAAE,eAAe,EAAE,QAAQ,EAAE,WAAW,EAAE,cAAc,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;QAwH/J,qBAAC;IAAD,CAzHA,AAyHC,IAAA;IAED,OAAO,CAAC,MAAM,CAAC,kBAAkB,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,MAAM,EAAE,cAAc,CAAC,CAAC;AAE9E,CAAC,EA9HM,cAAc,KAAd,cAAc,QA8HpB","file":"controllers/Main/main.controller.js","sourcesContent":["module mainController {\r\n    class MainController {\r\n        static $inject = ['$q', '$state', '$ionicPopup', '$ionicLoading', '$scope', '$location', 'CustomerHttp', '$window', 'toaster', '$rootScope', 'SharedHttp'];\r\n        GetLoginStatus: boolean;\r\n        NotifiCount: number;\r\n        getRole: string;\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $ionicPopup: ionic.popup.IonicPopupService,\r\n            private $ionicLoading: ionic.loading.IonicLoadingService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private toaster: ngtoaster.IToasterService,\r\n            private $rootScope: any,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp\r\n\r\n        ) {\r\n            this.$rootScope.UserProfileName = this.$window.localStorage.getItem('CustomerName');\r\n            this.$rootScope.GetLoginStatus = (this.$window.localStorage.getItem('LoginStatus') == \"true\" ? true : false);\r\n            this.$rootScope.getRole = (this.$window.localStorage.getItem('Role') == \"P\" ? \"P\" : \"C\");\r\n            console.log(this.$rootScope.getRole);\r\n            var customerID = this.$window.localStorage.getItem('CustomerID');\r\n            var seldf = this;\r\n            if (customerID != null) {\r\n                seldf.SharedHttp.GetMyNotification(customerID).then(function (res: any) { seldf.$rootScope.NotifiCount = res.length; });\r\n            }\r\n            \r\n            try {\r\n                document.addEventListener('deviceready', seldf.onDeviceReady, false);\r\n              \r\n            }\r\n            catch (e)\r\n            {\r\n              \r\n            }\r\n\r\n        }\r\n\r\n        onDeviceReady() {\r\n     \r\n            if (device.platform === 'iOS') {\r\n                StatusBar.hide();\r\n            }\r\n\r\n            var push = PushNotification.init({\r\n                android: {\r\n                    senderID: \"24553703183\"\r\n                },\r\n                browser: {\r\n                    pushServiceURL: 'http://push.api.phonegap.com/v1/push'\r\n                },\r\n                ios: {\r\n                    alert: \"true\",\r\n                    badge: \"true\",\r\n                    sound: \"true\"\r\n                },\r\n                windows: {}\r\n            });\r\n\r\n            push.on('registration', function (data: any) {\r\n         // alert(JSON.stringify(data) + \", Device Name :: \" + device.model + \", :: Token :: \" + data.registrationId);\r\n                try {\r\n                 \r\n                    localStorage.setItem('DeviceToken', data.registrationId);\r\n                    localStorage.setItem('DeviceName', device.model);\r\n                }\r\n                catch (e) {\r\n                    alert(JSON.stringify(\"Error :: \" + e));\r\n                }\r\n\r\n            });\r\n\r\n            push.on('notification', function (data) {\r\n                //var i = 2;\r\n        \r\n                if (!data.additionalData.foreground) {\r\n                    //cordova.plugins.notification.badge.set(i);\r\n                    window.location.href = \"#/Notification\";\r\n                }\r\n                // data.message,\r\n                // data.title,\r\n                // data.count,\r\n                // data.sound,\r\n                // data.image,\r\n                // data.additionalData\r\n            });\r\n            push.on('error', function (e) {\r\n               // alert(\"Push Error : \" + JSON.stringify(e) + \" DeviceToken : \" + localStorage.getItem('DeviceToken'));\r\n                // e.message\r\n            });\r\n\r\n        }\r\n\r\n\r\n        doLogOut() {\r\n            this.$rootScope.GetLoginStatus = false;\r\n\r\n            this.$window.localStorage.setItem('LoginStatus', \"false\");\r\n            this.$rootScope.UserProfileName = \"Welcome to Spafoo\";\r\n            this.$window.localStorage.setItem('CustomerName', \"Welcome to Spafoo\");\r\n            this.$window.localStorage.setItem('Role', null);\r\n            this.$rootScope.getRole = (this.$window.localStorage.getItem('Role') == \"P\" ? \"P\" : \"C\");\r\n            //  alert(\"LogOut :: \"+this.$rootScope.GetLoginStatus + \", type Of :: \" + typeof (this.$rootScope.GetLoginStatus));\r\n            $('.clsmenu').click(function () {\r\n                $('.titre').click();\r\n                $('.tcon').removeClass(\"tcon-transform\");\r\n            });\r\n\r\n            this.$state.go('home');\r\n        }\r\n\r\n        HideShowMenu() {\r\n            $('.titre').click();\r\n            $('.tcon').removeClass(\"tcon-transform\");\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    angular.module('spafoo.ctrl.Main', []).controller('Main', MainController);\r\n\r\n}"],"sourceRoot":"/source/"}