{"version":3,"sources":["controllers/Pro-AppointmentDetail/ProAppointmentDetail.controller.ts"],"names":[],"mappings":"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","file":"controllers/Pro-AppointmentDetail/ProAppointmentDetail.controller.js","sourcesContent":["module ProAppointmentDetailController {\r\n\r\n    class ProAppointmentDetailController {\r\n        AppID: number;\r\n        ServiceData: any;\r\n        amountField: any;\r\n        authTxnIDField: any;\r\n        mapDiv: any;\r\n        mapOptions: any;\r\n        static map: any;\r\n        static currentLatLong: any;\r\n        static $inject = ['$q', '$state', '$scope', '$location', 'CustomerHttp', '$window', 'SharedHttp'];\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp\r\n        ) {\r\n            var self = this;\r\n            this.AppID = this.$window.localStorage.getItem('AppointmentIDs');\r\n            this.getClientSchedular(this.AppID);\r\n\r\n            document.addEventListener(\"deviceready\", function () {\r\n\r\n                var self = this;\r\n                self.mapDiv = document.getElementById(\"map_area\");\r\n\r\n\r\n                const init = new plugin.google.maps.LatLng(-1, -1);\r\n                self.mapOptions = {\r\n                    'backgroundColor': 'white',\r\n                    'mapType': plugin.google.maps.MapTypeId.ROADMAP,\r\n                    'controls': {\r\n                        'compass': true,\r\n                        'myLocationButton': true,\r\n                        'indoorPicker': true,\r\n                        'zoom': true\r\n                    },\r\n                    'gestures': {\r\n                        'scroll': true,\r\n\r\n                        'rotate': true,\r\n                        'zoom': true\r\n                    },\r\n                    'camera': {\r\n                        'latLng': init,\r\n\r\n                        'zoom': 15,\r\n                        //'bearing': 50\r\n                    }\r\n                };\r\n                ProAppointmentDetailController.map = plugin.google.maps.Map.getMap(self.mapDiv, self.mapOptions);\r\n                ProAppointmentDetailController.map.on(plugin.google.maps.event.MAP_CLICK, function () {\r\n\r\n                    $(\"#infowindow\").hide();\r\n                    //self.infoWindow = false;\r\n\r\n                });\r\n                // You have to wait the MAP_READY event.\r\n            });\r\n\r\n        }\r\n\r\n        getClientSchedular(AppID: any) {\r\n            var self = this;\r\n            self.CustomerHttp.get('/GetAppointment/' + AppID).then(function (response: any) {\r\n                self.ServiceData = response.GetAppointmentResult;\r\n                var orderdt = self.SharedHttp.getFormatedDate(self.ServiceData.forDateField, \"weekday dd MMMM yyyy\");\r\n                self.ServiceData.orderDateField = orderdt;\r\n                self.ServiceData.atTimeField = self.SharedHttp.getFormatedTime(self.ServiceData.atTimeField);\r\n                self.ServiceData.DayField = orderdt.split(' ')[1];\r\n                self.ServiceData.MonthField = orderdt.split(' ')[2];\r\n                self.amountField = self.ServiceData.amountField;\r\n                self.authTxnIDField = self.ServiceData.authTxnIDField;\r\n                self.SharedHttp.GetAddressInfo(self.ServiceData.appointmentIDField).then(function (e: any) { self.ServiceData.addressField = e; self.addMarkers(); });\r\n                var serviceName = \"\";\r\n                $.each(self.ServiceData.servicesField, function (ig, sitem) {\r\n                    serviceName += sitem.serviceNameField + \",\";\r\n                });\r\n                self.ServiceData.ServiceList = serviceName.substr(0, serviceName.lastIndexOf(','));\r\n                self.SharedHttp.GetUserInfo(self.ServiceData.clientIDField).then(function (res: any) {\r\n                    self.ServiceData.displayNameField = res.displayNameField;\r\n                    self.ServiceData.telephoneField = res.profileField.telephoneField;\r\n                    //self.SharedHttp.getProfilePics(res.profileField.photoField).then(function (imgres) { self.ServiceData.profilePic = imgres; });\r\n\r\n                });\r\n                \r\n\r\n                //self.CustomerHttp.get('/GetUserJSON/' + self.ServiceData.clientIDField).then(function (res: any) {\r\n                //    var userInf = JSON.parse(res.GetUserJSONResult);\r\n                //    console.log(userInf);\r\n                //    self.ServiceData.displayNameField = userInf.DisplayName;\r\n                //}, function (error: any) { \r\n                //})\r\n\r\n                //console.log(response);\r\n            }, function (error) {\r\n            });\r\n        }\r\n\r\n\r\n        addMarkers() {\r\n\r\n            var self = this;\r\n            //var currentlatlong = { latitude: FindProviderController.currentLatLong.coords.latitude, longitude: FindProviderController.currentLatLong.coords.longitude };\r\n            var request = {\r\n                'address': self.ServiceData.addressField\r\n            };\r\n            plugin.google.maps.Geocoder.geocode(request, function (results: any) {\r\n                //alert(JSON.stringify(results));\r\n                if (results.length) {\r\n                    var result = results[0];\r\n                    var position = result.position;\r\n\r\n                    ProAppointmentDetailController.map.addMarker({\r\n                        'position': position,\r\n                        'title': self.ServiceData.displayNameField\r\n                    }, function (marker) {\r\n\r\n                        ProAppointmentDetailController.map.animateCamera({\r\n                            'target': position,\r\n                            'zoom': 17\r\n                        }, function () {\r\n                            marker.showInfoWindow();\r\n                        });\r\n\r\n                    });\r\n                } else {\r\n                    //alert(\"Not found\");\r\n                }\r\n\r\n            });\r\n            \r\n        }\r\n\r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.ProAppointmentDetail', []).controller('ProAppointmentDetail', ProAppointmentDetailController);\r\n\r\n}"],"sourceRoot":"/source/"}