{"version":3,"sources":["controllers/Pro-MyAvailability/Pro-MyAvailability.controller.ts"],"names":[],"mappings":"AAAA,IAAO,2BAA2B,CA0OjC;AA1OD,WAAO,6BAA2B,EAAC,CAAC;IAEhC;QASI,qCACY,EAAgB,EAChB,MAAgC,EAChC,MAAiB,EACjB,SAA8B,EAC9B,YAAoD,EACpD,OAA0B,EAC1B,UAAgD,EAChD,MAAW,EACX,gBAAqB;YARrB,OAAE,GAAF,EAAE,CAAc;YAChB,WAAM,GAAN,MAAM,CAA0B;YAChC,WAAM,GAAN,MAAM,CAAW;YACjB,cAAS,GAAT,SAAS,CAAqB;YAC9B,iBAAY,GAAZ,YAAY,CAAwC;YACpD,YAAO,GAAP,OAAO,CAAmB;YAC1B,eAAU,GAAV,UAAU,CAAsC;YAChD,WAAM,GAAN,MAAM,CAAK;YACX,qBAAgB,GAAhB,gBAAgB,CAAK;YAK7B,IAAI,IAAI,GAAG,IAAI,CAAC;YAGhB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YACxD,IAAI,CAAC,QAAQ,GAAG;gBACZ,QAAQ,EAAE;oBACN,MAAM,EAAE,GAAG;oBACX,QAAQ,EAAE,IAAI;oBACd,MAAM,EAAE;wBAGJ,KAAK,EAAE,iBAAiB;qBAC3B;oBACD,QAAQ,EAAE,UAAU,IAAS,EAAE,OAAY,EAAE,IAAS;wBAElD,IAAI,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAQ,+CAA+C;wBAC5G,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;4BAC9B,KAAK,EAAE,YAAY,EAAE,MAAM,EAAE,IAAI;4BACjC,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC;4BACxC,eAAe,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;4BAClD,KAAK,EAAE,CAAC;4BACR,KAAK,EAAE,SAAS;yBAEnB,CAAC,CAAC;oBACP,CAAC;iBAEJ;aACJ,CAAC;YAKE,6BAA6B;YAEjC,IAAI,CAAC,SAAS,EAAE,CAAA;QAIpB,CAAC;QAGD,+CAAS,GAAT;YAGI,IAAI,IAAI,GAAG,IAAI,CAAC;YAEhB,IAAI,CAAC,aAAa;gBACd;oBACI,oBAAoB;oBACpB;wBACA,MAAM,EAAE,EAAE;wBACN,KAAK,EAAE,OAAO;wBACd,SAAS,EAAE,OAAO,CAAC,aAAa;qBACnC,CAAC,CAAC;YAEP,2CAA2C;YAC3C,IAAI,CAAC,WAAW,GAAG,CAAC,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;YAC3D,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,GAAQ;gBAE5E,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC;gBAErD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBAC/C,IAAI,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC;oBACrD,IAAI,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC;oBAEjD,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;oBAM5C,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;oBACpE,IAAI,OAAO,GAAG,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;oBAClE,IAAI,QAAQ,GAAG,EAAE,CAAC;oBAIlB,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC;wBAG9B,KAAK,EAAE,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;wBAErD,SAAS,EAAE,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,OAAO,CAAE;wBACnF,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,OAAO,CAAC;wBAC7E,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,OAAO;wBAChC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,UAAU;wBACrC,SAAS,EAAE,UAAU;wBACrB,eAAe,EAAE,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC;wBAC/D,KAAK,EAAE,SAAS;qBAIjB,CAAC,CAAC;gBAIP,CAAC;YAKL,CAAC,EAAE,UAAU,CAAC;YACd,CAAC,CAAC,CAAC;QAGP,CAAC;QACD,iDAAW,GAAX,UAAY,MAAW,EAAE,KAAU,EAAE,MAAW;YAG5C,IAAI,GAAG,GAAG,OAAO,CAAC,8BAA8B,CAAC,CAAC;YAClD,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBAEN,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;gBAC/C,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,eAAe,GAAG,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC;YAC/F,CAAC;QAEL,CAAC;QAED,8CAAQ,GAAR,UAAS,IAAS;YAEf,+BAA+B;YAC9B,IAAI,GAAG,GAAG,EAAE,CAAC;YAEb,EAAE,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC;gBAEZ,IAAI,CAAC,OAAO,GAAG,wBAAwB,CAAC;gBACxC,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;gBAC5B,MAAM,CAAC;YACX,CAAC;YAED,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACnC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,SAAS,CAAE,CAAC,CAAC,CAAC;oBAEtC,IAAI,CAAC,OAAO,GAAG,gCAAgC,CAAC;oBAChD,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;oBAC5B,MAAM,CAAC;gBAEX,CAAC;gBACD,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,WAAW,CAAC,CAAC,CACzC,CAAC;oBAEG,IAAI,CAAC,OAAO,GAAG,gCAAgC,CAAC;oBAChD,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;oBAC5B,MAAM,CAAC;gBACX,CAAC;gBACD,IAAI,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBACxC,IAAI,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;gBACxC,6CAA6C;gBAC3C,EAAE,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,CACnB,CAAC;oBACG,IAAI,CAAC,OAAO,GAAG,qCAAqC,CAAC;oBACrD,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;oBAC5B,MAAM,CAAC;gBACX,CAAC;YACL,CAAC;YAID,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gBACnC,IAAI,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;gBAC5C,IAAI,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;gBACxC,IAAI,WAAW,GAAC,CAAC,CAAC;gBAClB,IAAI,SAAS,GAAG,CAAC,CAAC;gBAClB,IAAI,KAAK,GAAG,EAAE,CAAC;gBACf,IAAI,GAAG,GAAG,EAAE,CAAC;gBAGb,EAAE,CAAC,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;oBAC3B,SAAS,GAAG,OAAO,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC;oBAEpC,GAAG,GAAG,SAAS,GAAG,GAAG,GAAG,OAAO,CAAC,UAAU,EAAE,GAAG,KAAK,CAAC;gBAEzD,CAAC;gBACD,IAAI,CAAC,CAAC;oBACF,mBAAmB;oBACnB,GAAG,GAAG,OAAO,CAAC,QAAQ,EAAE,GAAG,GAAG,GAAG,OAAO,CAAC,UAAU,EAAE,GAAG,KAAK,CAAC;gBAElE,CAAC;gBACD,EAAE,CAAC,CAAC,SAAS,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;oBAC7B,WAAW,GAAG,SAAS,CAAC,QAAQ,EAAE,GAAG,EAAE,CAAC;oBACxC,KAAK,GAAG,WAAW,GAAG,GAAG,GAAG,SAAS,CAAC,UAAU,EAAE,GAAG,KAAK,CAAC;gBAC3D,CAAC;gBACD,IAAI,CAAC,CAAC;oBACN,KAAK,GAAG,SAAS,CAAC,QAAQ,EAAE,GAAG,GAAG,GAAG,SAAS,CAAC,UAAU,EAAE,GAAE,KAAK,CAAC;gBACnE,CAAC;gBAEL,uCAAuC;gBAEvC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,eAAe,GAAG,GAAG,GAAG,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAA;YAGlE,CAAC;YAED,IAAI,QAAQ,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC;YAChD,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,aAAa,CAAC,CAAC,IAAI,CAAC,UAAU,GAAQ;gBAGnE,IAAI,CAAC,OAAO,GAAG,sBAAsB,CAAC;gBACtC,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YAGhC,CAAC,CAAC,CAAC;QACP,CAAC;QA1NM,mCAAO,GAAG,CAAC,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,EAAE,cAAc,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,kBAAkB,CAAC,CAAC;QA2NpI,kCAAC;IAAD,CAnOA,AAmOC,IAAA;IAGD,OAAO,CAAC,MAAM,CAAC,+BAA+B,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,mBAAmB,EAAE,2BAA2B,CAAC,CAAC;AAErH,CAAC,EA1OM,2BAA2B,KAA3B,2BAA2B,QA0OjC","file":"controllers/Pro-MyAvailability/Pro-MyAvailability.controller.js","sourcesContent":["module ProMyAvailabilityController {\r\n\r\n    class ProMyAvailabilityController {\r\n        eventSource: any[];\r\n        uiConfig: any;\r\n        staticEvents: any;\r\n        staticEvents1: any;\r\n        userId: any;\r\n        serviceData: any[];\r\n        message: string;\r\n        static $inject = ['$q', '$state', '$scope', '$location', 'CustomerHttp', '$window', 'SharedHttp', 'moment', 'uiCalendarConfig'];\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp,\r\n            private moment: any,\r\n            private uiCalendarConfig: any\r\n          \r\n\r\n        ) {\r\n           \r\n            var self = this;\r\n\r\n         \r\n            self.userId = window.localStorage.getItem('CustomerID');\r\n            self.uiConfig = {\r\n                calendar: {\r\n                    height: 450,\r\n                    editable: true,\r\n                    header: {\r\n\r\n\r\n                        right: 'today prev,next'\r\n                    },\r\n                    dayClick: function (date: any, jsEvent: any, view: any) {\r\n                   \r\n                        var selectedDate = moment(date).format('YYYY-MM-DD');\t\t\t\t    // set dateFrom based on user click on calendar\r\n                        self.staticEvents1[0].events.push({\r\n                            start: selectedDate, allday: true,\r\n                            dateField: moment(date).format('MMM DD'),\r\n                            dateFieldHidden: moment(date).format('MM/DD/YYYY'),\r\n                            proId: 0,\r\n                            color: '#008000'\r\n\r\n                        });\t\t\t\t    \r\n                    },\r\n                   \r\n                }\r\n            };\r\n           \r\n\r\n           \r\n        \r\n                // any other event sources...\r\n        \r\n            self.availList()\r\n          \r\n            \r\n         \r\n        }\r\n      \r\n      \r\n        availList()\r\n        {\r\n\r\n            var self = this;\r\n           \r\n            self.staticEvents1 =\r\n                [\r\n                    // your event source\r\n                    {\r\n                    events: [],\r\n                        color: 'green',     // an option!\r\n                        textColor: 'black' // an option!\r\n                    }];\r\n             \r\n                //    self.staticEvents[0].events.push(val)\r\n                self.eventSource = [self.staticEvents, self.staticEvents1];\r\n                self.CustomerHttp.get('/ListMyAvail/' + self.userId).then(function (res: any) {\r\n                   \r\n                self.serviceData = JSON.parse(res.ListMyAvailResult);\r\n\r\n                for (var i = 0; i < self.serviceData.length; i++) {\r\n                    var starthours = self.serviceData[i].StartTime.Hours;\r\n                    var endhours = self.serviceData[i].EndTime.Hours;\r\n                   \r\n                    var dateMonth = self.serviceData[i].Date;\r\n               \r\n\r\n\r\n\r\n\r\n                 var   dateMonth1 = self.SharedHttp.getFormatedDate(dateMonth, \"MM DD\");\r\n                    var abcDate = (dateMonth).replace(\"/Date(\", \"\").replace(\")/\", \"\");\r\n                    var getmonth = '';\r\n                   \r\n                 \r\n                   \r\n                    self.staticEvents1[0].events.push({\r\n                     \r\n                    \r\n                        start: moment(parseInt(abcDate)).format('YYYY-MM-DD'),\r\n                    \r\n                        startTime: new Date(1970, 0, 1, starthours, self.serviceData[i].StartTime.Minutes ),\r\n                        endTime: new Date(1970, 0, 1, endhours, self.serviceData[i].EndTime.Minutes),\r\n                       id: self.serviceData[i].AvailID,\r\n                      proId: self.serviceData[i].ProviderID,\r\n                      dateField: dateMonth1,\r\n                      dateFieldHidden: moment(parseInt(abcDate)).format('MM/DD/YYYY'),\r\n                      color: '#008000'\r\n\r\n                       \r\n\r\n                    });\r\n\r\n\r\n\r\n                }\r\n               \r\n               \r\n               \r\n\r\n            }, function (e) {\r\n            });\r\n           \r\n\r\n        }\r\n        deleteEvent(avaiId: any, proId: any, $index: any)\r\n        {\r\n          \r\n            var con = confirm(\"Are you sure want to remove?\");\r\n            if (con) {\r\n                \r\n                this.staticEvents1[0].events.splice($index, 1);\r\n                this.CustomerHttp.get(\"/RemoveAvail/\" + avaiId).then(function (res) { }, function (e) { });\r\n            }\r\n\r\n        }\r\n      \r\n        doUpdate(data: any) {\r\n\r\n           // alert(JSON.stringify(data));\r\n            var csv = \"\";\r\n\r\n            if (data == 0) {\r\n              \r\n                this.message = \"Add a event to proceed\";\r\n                $(\"#PDone\").modal(\"toggle\");\r\n                return;\r\n            }\r\n         \r\n            for (var i = 0; i < data.length; i++) {\r\n                if (!data[i].hasOwnProperty('endTime') ) {\r\n                  \r\n                    this.message = \"Choose time on respective date\";\r\n                    $(\"#PDone\").modal(\"toggle\");\r\n                    return;\r\n                \r\n                }\r\n                if (!data[i].hasOwnProperty('startTime'))\r\n                {\r\n                    \r\n                    this.message = \"Choose time on respective date\";\r\n                    $(\"#PDone\").modal(\"toggle\");\r\n                    return;\r\n                }\r\n                var date1 = new Date(data[i].startTime);\r\n                var date2 = new Date(data[i].endTime);\r\n              //  alert(\"date1\" + date1 + \"date2\" + date2);\r\n                if (date2 <= date1)\r\n                {\r\n                    this.message = \"Start date is greater than end date\";\r\n                    $(\"#PDone\").modal(\"toggle\");\r\n                    return;\r\n                }\r\n            }\r\n           \r\n         \r\n\r\n            for (var i = 0; i < data.length; i++) {\r\n                var datestart = new Date(data[i].startTime);\r\n                var dateend = new Date(data[i].endTime);\r\n                var startResult=0;\r\n                var endResult = 0;\r\n                var start = '';\r\n                var end = '';\r\n\r\n             \r\n                if (dateend.getHours() >= 12) {\r\n                    endResult = dateend.getHours() - 12;\r\n                    \r\n                    end = endResult + \":\" + dateend.getMinutes() + \" PM\";\r\n                    \r\n                }\r\n                else {\r\n                    //alert(endResult);\r\n                    end = dateend.getHours() + \":\" + dateend.getMinutes() + \" AM\";\r\n                    //alert(\"end\" + end);\r\n                }\r\n                if (datestart.getHours() >= 12) {\r\n                    startResult = datestart.getHours() - 12;\r\n                    start = startResult + \":\" + datestart.getMinutes() + \" PM\";\r\n                    }\r\n                    else {\r\n                    start = datestart.getHours() + \":\" + datestart.getMinutes()+ \" AM\";\r\n                    }\r\n               \r\n                //alert(\"start\" + start + \"end\" + end);\r\n\r\n                csv += data[i].dateFieldHidden + \"_\" + start + \"_\" + end + \"|\"\r\n\r\n\r\n            }\r\n       \r\n            var jsonData = { CSV: csv, ProID: this.userId };\r\n            var self = this;\r\n            this.CustomerHttp.post(jsonData, \"/AddMyAvail\").then(function (res: any) {\r\n           \r\n               \r\n                self.message = \"Updated Successfully\";\r\n                $(\"#PDone\").modal(\"toggle\");\r\n                \r\n\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.ProMyAvailability', []).controller('ProMyAvailability', ProMyAvailabilityController);\r\n\r\n}"],"sourceRoot":"/source/"}