{"version":3,"sources":["controllers/AddClientRating/AddClientReview.controller.ts"],"names":[],"mappings":"AAAA,IAAO,yBAAyB,CAgN/B;AAhND,WAAO,2BAAyB,EAAC,CAAC;IA0B9B;QA8BI,mCACY,EAAgB,EAChB,MAAgC,EAChC,WAA0C,EAC1C,aAAgD,EAChD,MAAiB,EACjB,SAA8B,EAC9B,YAAoD,EACpD,OAA0B,EAC1B,OAAkC,EAClC,UAAgD,EAChD,YAA0B;YAV1B,OAAE,GAAF,EAAE,CAAc;YAChB,WAAM,GAAN,MAAM,CAA0B;YAChC,gBAAW,GAAX,WAAW,CAA+B;YAC1C,kBAAa,GAAb,aAAa,CAAmC;YAChD,WAAM,GAAN,MAAM,CAAW;YACjB,cAAS,GAAT,SAAS,CAAqB;YAC9B,iBAAY,GAAZ,YAAY,CAAwC;YACpD,YAAO,GAAP,OAAO,CAAmB;YAC1B,YAAO,GAAP,OAAO,CAA2B;YAClC,eAAU,GAAV,UAAU,CAAsC;YAChD,iBAAY,GAAZ,YAAY,CAAc;YAElC,IAAI,CAAC,eAAe,EAAE,CAAC;YACvB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;QAE/C,CAAC;QACD,+CAAW,GAAX;YACI,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YAC9D,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YAC3C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,YAAY,CAAC,cAAc,CAAC;YACvD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC;YAC/D,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,aAAa,CAAC;YACrD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC;YAEjD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC;YACjC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;YAEnC,sLAAsL;YACtL,yCAAyC;YACzC,sBAAsB;YACtB,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;QACvM,CAAC;QACD,mDAAe,GAAf;YACI,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;YAC9D,EAAE,CAAC,CAAC,MAAM,KAAK,IAAI,IAAI,MAAM,KAAK,OAAO,IAAI,MAAM,KAAK,KAAK,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,WAAW,IAAI,MAAM,KAAK,EAAE,CAAC,CAAC,CAAC;gBAC/H,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC;YAC5B,CAAC;YACD,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;YACvB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YAC3C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC;YAC7C,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAU,QAAa;gBAC/E,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,iBAAiB,CAAC;gBAC9C,IAAI,CAAC,WAAW,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,CAAC,cAAc,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,GAAG,CAAA;gBACjH,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU,MAAM,IAAI,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACnI,CAAC,EAAE,UAAU,KAAK;gBACd,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;gBAErB,CAAC;gBAAC,IAAI,CAAC,CAAC;gBAER,CAAC;YACL,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,UAAU,QAAa;gBAC/D,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;gBAC7B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACnC,CAAC,EAAE,UAAU,KAAK;gBACd,EAAE,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC;gBAErB,CAAC;gBAAC,IAAI,CAAC,CAAC;gBAER,CAAC;YACL,CAAC,CAAC,CAAC;QAEP,CAAC;QAED,2CAAO,GAAP,UAAQ,IAAY;YAChB,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;QACtC,CAAC;QAED,+CAAW,GAAX;YACI,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,GAAG,KAAK,GAAG,IAAI,CAAC;QAC3D,CAAC;QAED,gDAAY,GAAZ,UAAa,eAAuB,EAAE,iBAAyB,EAAE,KAAa;YAC1E,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,EAAE,CAAC,CAAC,eAAe,KAAK,eAAe,CAAC,CAAC,CAAC;gBACtC,IAAI,CAAC,aAAa,GAAG,iBAAiB,GAAG,GAAG,GAAG,KAAK,CAAC;YACzD,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,eAAe,KAAK,kBAAkB,CAAC,CAAC,CAAC;gBAChD,IAAI,CAAC,eAAe,GAAG,iBAAiB,GAAG,GAAG,GAAG,KAAK,CAAC;YAC3D,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,eAAe,KAAK,aAAa,CAAC,CAAC,CAAC;gBAC3C,IAAI,CAAC,WAAW,GAAG,iBAAiB,GAAG,GAAG,GAAG,KAAK,CAAC;YACvD,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,eAAe,KAAK,UAAU,CAAC,CAAC,CAAC;gBACxC,IAAI,CAAC,QAAQ,GAAG,iBAAiB,GAAG,GAAG,GAAG,KAAK,CAAC;YACpD,CAAC;QACL,CAAC;QAED,8CAAU,GAAV,UAAW,IAAS;YAEhB,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QACzB,CAAC;QAED,8CAAU,GAAV;YACI,IAAI,IAAI,GAAG,IAAI,CAAC;YAChB,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,IAAI,IAAI,IAAI,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,CAAC;gBACjD,IAAI,CAAC,QAAQ,GAAG,uBAAuB,CAAC;gBACxC,CAAC,CAAC,aAAa,CAAC,CAAC,KAAK,EAAE,CAAC;gBACzB,MAAM,CAAC;YACX,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,eAAe,IAAI,IAAI,IAAI,IAAI,CAAC,eAAe,IAAI,EAAE,CAAC,CAAC,CAAC;gBAC7D,IAAI,CAAC,QAAQ,GAAG,+BAA+B,CAAC;gBAChD,CAAC,CAAC,aAAa,CAAC,CAAC,KAAK,EAAE,CAAC;gBACzB,MAAM,CAAC;YACX,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,IAAI,IAAI,IAAI,IAAI,CAAC,aAAa,IAAI,EAAE,CAAC,CAAC,CAAC;gBACzD,IAAI,CAAC,QAAQ,GAAG,6BAA6B,CAAC;gBAC9C,CAAC,CAAC,aAAa,CAAC,CAAC,KAAK,EAAE,CAAC;gBACzB,MAAM,CAAC;YACX,CAAC;YACD,EAAE,CAAC,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,IAAI,IAAI,CAAC,WAAW,IAAI,EAAE,CAAC,CAAC,CAAC;gBACrD,IAAI,CAAC,QAAQ,GAAG,4BAA4B,CAAC;gBAC7C,CAAC,CAAC,aAAa,CAAC,CAAC,KAAK,EAAE,CAAC;gBACzB,MAAM,CAAC;YACX,CAAC;YAED,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,IAAI,EAAE,CAAC,CAAC,CAAC;gBAC/C,IAAI,CAAC,QAAQ,GAAG,yBAAyB,CAAC;gBAC1C,CAAC,CAAC,aAAa,CAAC,CAAC,KAAK,EAAE,CAAC;gBACzB,MAAM,CAAC;YACX,CAAC;YAGD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,GAAG,GAAG,GAAG,IAAI,CAAC,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,aAAa,GAAG,GAAG,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC;YACvI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,GAAG,GAAG,GAAG,IAAI,CAAC,kBAAkB,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACtG,8BAA8B;YAC9B,8BAA8B;YAC9B,IAAI,IAAI,GAAG;gBACP,OAAO,EAAE,IAAI,CAAC,aAAa;gBAC3B,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC;gBAC7D,WAAW,EAAE,IAAI,CAAC,SAAS;gBAC3B,YAAY,EAAE,IAAI,CAAC,QAAQ;gBAC3B,WAAW,EAAE,IAAI,CAAC,SAAS;aAC9B,CAAA;YACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YAClB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC,IAAI,CAAC,UAAU,GAAG;gBACzD,IAAI,CAAC,QAAQ,GAAG,sBAAsB,CAAC;gBACvC,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,EAAE,CAAC;YACxB,CAAC,EAAE,UAAU,KAAK;YAElB,CAAC,CAAC,CAAC;QAEP,CAAC;QAlJM,iCAAO,GAAG,CAAC,IAAI,EAAE,QAAQ,EAAE,aAAa,EAAE,eAAe,EAAE,QAAQ,EAAE,WAAW,EAAE,cAAc,EAAE,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,cAAc,CAAC,CAAC;QAoJjK,gCAAC;IAAD,CAjLA,AAiLC,IAAA;IAGD,OAAO,CAAC,MAAM,CAAC,6BAA6B,EAAE,EAAE,CAAC,CAAC,UAAU,CAAC,iBAAiB,EAAE,yBAAyB,CAAC,CAAC;AAE/G,CAAC,EAhNM,yBAAyB,KAAzB,yBAAyB,QAgN/B","file":"controllers/AddClientRating/AddClientReview.controller.js","sourcesContent":["module AddClientReviewController {\r\n\r\n    interface IAddClientReviewController {\r\n        clientId: string;\r\n        appointmentID: string;\r\n        ServiceData: any;\r\n        listRateData: any;\r\n        profilePic: string;\r\n        rateValue: string;\r\n        isChecked: boolean;\r\n        commentTxt: string;\r\n        dropDownVal: string;\r\n        ratingCSV: string;\r\n        communication: string;\r\n        cooperation: string;\r\n        timePunctuality: string;\r\n        reviewCSV: string;\r\n        messages: string;\r\n        aboutClientLike: string;\r\n        aboutClientDislike: string;\r\n        attitude: string;\r\n    }\r\n\r\n    interface IStateParams extends angular.ui.IStateParamsService {\r\n    }\r\n\r\n    class AddClientReviewController implements IAddClientReviewController {\r\n        clientId: string;\r\n        appointmentID: string;\r\n        ServiceData: any;\r\n        listRateData: any;\r\n        profilePic: string;\r\n        rateValue: string;\r\n        isChecked: boolean;\r\n        commentTxt: string;\r\n        dropDownVal: string;\r\n        ratingCSV: string;\r\n        communication: string;\r\n        cooperation: string;\r\n        timePunctuality: string;\r\n        reviewCSV: string;\r\n        messages: string;\r\n        aboutClientLike: string;\r\n        aboutClientDislike: string;\r\n        attitude: string;\r\n        pageName: string;\r\n        UserID: string;\r\n        authTxnIDField: string;\r\n        appointmentIDField: string;\r\n        payTxnIDField: string;\r\n        amountField: string;\r\n        PID: string;\r\n        PPID: string;\r\n\r\n\r\n        static $inject = ['$q', '$state', '$ionicPopup', '$ionicLoading', '$scope', '$location', 'CustomerHttp', '$window', 'toaster', 'SharedHttp', '$stateParams'];\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $ionicPopup: ionic.popup.IonicPopupService,\r\n            private $ionicLoading: ionic.loading.IonicLoadingService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private toaster: ngtoaster.IToasterService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp,\r\n            private $stateParams: IStateParams\r\n        ) {\r\n            this.getProviderInfo();\r\n            this.pageName = this.$stateParams.pageName;\r\n\r\n        }\r\n        CompleteApp() {\r\n            var self = this;\r\n            self.UserID = this.$window.localStorage.getItem('CustomerID');\r\n            self.clientId = self.$stateParams.clientId;\r\n            self.authTxnIDField = self.$stateParams.authTxnIDField;\r\n            self.appointmentIDField = self.$stateParams.appointmentIDField;\r\n            self.payTxnIDField = self.$stateParams.payTxnIDField;\r\n            self.amountField = self.$stateParams.amountField;\r\n\r\n            self.PID = self.$stateParams.PID;\r\n            self.PPID = self.$stateParams.PPID;\r\n\r\n            //console.log(self.UserID + ':' + self.clientId + ':' + self.authTxnIDField + ':' + self.appointmentIDField + ':' + self.payTxnIDField + ':' + self.amountField + ':' + self.comment);\r\n            //self.message = 'Appointment Completed';\r\n            //$(\"#PDone\").modal();\r\n            self.SharedHttp.completeAppService(self.UserID, self.clientId, self.authTxnIDField, self.appointmentIDField, self.payTxnIDField, self.amountField, self.$stateParams.comment, self.PID, self.PPID);\r\n        }\r\n        getProviderInfo() {\r\n            var self = this;\r\n            var status = self.$window.localStorage.getItem('LoginStatus');\r\n            if (status === null || status === 'false' || status === false || status === undefined || status === 'undefined' || status === '') {\r\n                self.$state.go('login');\r\n            }\r\n            self.isChecked = false;\r\n            self.clientId = self.$stateParams.clientId;\r\n            self.appointmentID = self.$stateParams.appId;\r\n            self.CustomerHttp.get('/GetUserInfo/' + self.clientId).then(function (response: any) {\r\n                self.ServiceData = response.GetUserInfoResult;\r\n                self.ServiceData.firstNameField = self.ServiceData.firstNameField + \" \" + self.ServiceData.lastNameField[0] + \".\"\r\n                self.SharedHttp.getProfilePics(self.ServiceData.profileField.photoField).then(function (imgres) { self.profilePic = imgres; });\r\n            }, function (error) {\r\n                if (error === null) {\r\n\r\n                } else {\r\n                    //console.log(error);\r\n                }\r\n            });\r\n            self.CustomerHttp.get('/ListRating/1').then(function (response: any) {\r\n                self.listRateData = response;\r\n                console.log(self.listRateData);\r\n            }, function (error) {\r\n                if (error === null) {\r\n\r\n                } else {\r\n                    //console.log(error);\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        getRate(rate: string) {\r\n            var self = this;\r\n            self.rateValue = '0' + ':' + rate;\r\n        }\r\n\r\n        toggleCheck() {\r\n            var self = this;\r\n            self.isChecked = self.isChecked == true ? false : true;\r\n        }\r\n\r\n        postRateInfo(ratingNameField: string, ratingTypeIDField: string, value: string) {\r\n            var self = this;\r\n            if (ratingNameField === 'Communication') {\r\n                self.communication = ratingTypeIDField + ':' + value;\r\n            } else if (ratingNameField === 'Time Punctuality') {\r\n                self.timePunctuality = ratingTypeIDField + ':' + value;\r\n            } else if (ratingNameField === 'Cooperation') {\r\n                self.cooperation = ratingTypeIDField + ':' + value;\r\n            } else if (ratingNameField === 'Attitude') {\r\n                self.attitude = ratingTypeIDField + ':' + value;\r\n            }\r\n        }\r\n\r\n        redirectTo(href: any) {\r\n\r\n            $('#PDone').modal('toggle');\r\n            this.$state.go(href);\r\n        }\r\n\r\n        postRating() {\r\n            var self = this;\r\n            if (self.rateValue == null || self.rateValue == \"\") {\r\n                self.messages = \"Please choose rating.\";\r\n                $(\"#PDoneError\").modal();\r\n                return;\r\n            }\r\n            if (self.timePunctuality == null || self.timePunctuality == \"\") {\r\n                self.messages = \"Please choose timePunctuality\";\r\n                $(\"#PDoneError\").modal();\r\n                return;\r\n            }\r\n            if (self.communication == null || self.communication == \"\") {\r\n                self.messages = \"Please choose communication\";\r\n                $(\"#PDoneError\").modal();\r\n                return;\r\n            }\r\n            if (self.cooperation == null || self.cooperation == \"\") {\r\n                self.messages = \"Please choose cooperation.\";\r\n                $(\"#PDoneError\").modal();\r\n                return;\r\n            }\r\n\r\n            if (self.attitude == null || self.attitude == \"\") {\r\n                self.messages = \"Please choose attitude.\";\r\n                $(\"#PDoneError\").modal();\r\n                return;\r\n            }\r\n\r\n\r\n            self.ratingCSV = self.rateValue + '|' + self.timePunctuality + '|' + self.communication + '|' + self.cooperation + '|' + self.attitude;\r\n            self.reviewCSV = self.aboutClientLike + ':' + self.aboutClientDislike + ':' + self.commentTxt + ':-1';\r\n            //console.log(self.ratingCSV);\r\n            //console.log(self.reviewCSV);\r\n            var data = {\r\n                \"AppID\": self.appointmentID,\r\n                \"RatingByID\": self.$window.localStorage.getItem('CustomerID'),\r\n                \"RatingCSV\": self.ratingCSV,\r\n                \"RatingToID\": self.clientId,\r\n                \"ReviewCSV\": self.reviewCSV\r\n            }\r\n            console.log(data);\r\n            self.CustomerHttp.post(data, '/AddRating').then(function (res) {\r\n                self.messages = 'Thank you for rating';\r\n                $('#PDone').modal();\r\n            }, function (error) {\r\n\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.AddClientReview', []).controller('AddClientReview', AddClientReviewController);\r\n\r\n}"],"sourceRoot":"/source/"}