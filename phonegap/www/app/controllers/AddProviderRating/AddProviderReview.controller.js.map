{"version":3,"sources":["controllers/AddProviderRating/AddProviderReview.controller.ts"],"names":[],"mappings":"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","file":"controllers/AddProviderRating/AddProviderReview.controller.js","sourcesContent":["module AddProviderReviewController {\r\n\r\n    interface IAddProviderReviewController{\r\n        providerId:string;\r\n        appointmentID:string;\r\n        ServiceData:any;\r\n        listRateData:any;\r\n        profilePic:string;\r\n        rateValue:string;\r\n        isChecked:boolean;\r\n        commentTxt:string;\r\n        dropDownVal:string;\r\n        ratingCSV:string;\r\n        workQuality:string;\r\n        timePunctuality:string;\r\n        reviewCSV:string;\r\n        messages:string;\r\n    }\r\n\r\n    interface IStateParams extends angular.ui.IStateParamsService {\r\n    }\r\n\r\n    class AddProviderReviewController implements IAddProviderReviewController {\r\n        providerId:string;\r\n        appointmentID:string;\r\n        ServiceData:any;\r\n        listRateData:any;\r\n        profilePic:string;\r\n        rateValue:string;\r\n        isChecked:boolean;\r\n        commentTxt:string;\r\n        dropDownVal:string;\r\n        ratingCSV:string;\r\n        workQuality:string;\r\n        timePunctuality:string;\r\n        reviewCSV:string;\r\n        messages:string;        \r\n        static $inject = ['$q', '$state', '$ionicPopup', '$ionicLoading', '$scope', '$location', 'CustomerHttp', '$window', 'toaster', 'SharedHttp','$stateParams'];\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $ionicPopup: ionic.popup.IonicPopupService,\r\n            private $ionicLoading: ionic.loading.IonicLoadingService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private toaster: ngtoaster.IToasterService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp,\r\n            private $stateParams: IStateParams\r\n        ) {\r\n            this.getProviderInfo();\r\n             \r\n\r\n        }\r\n        getProviderInfo() {\r\n            var self = this;\r\n            var status= self.$window.localStorage.getItem('LoginStatus');\r\n            if(status === null || status === 'false' || status === false || status === undefined || status === 'undefined' || status === ''){\r\n                self.$state.go('login');\r\n            }\r\n            self.isChecked = false;\r\n            self.providerId = self.$stateParams.providerId;\r\n            self.appointmentID = self.$stateParams.appId;\r\n            self.CustomerHttp.get('/GetUserInfo/' + self.providerId).then(function (response: any) {\r\n                self.ServiceData = response.GetUserInfoResult;\r\n                self.SharedHttp.getProfilePics(self.ServiceData.profileField.photoField).then(function (imgres) { self.profilePic = imgres;});\r\n            }, function (error) {\r\n                if (error === null) {\r\n\r\n                } else {\r\n                    console.log(error);\r\n                }\r\n            });\r\n            self.CustomerHttp.get('/ListRating/2').then(function(response:any){\r\n                self.listRateData=response;\r\n                console.log(self.listRateData);\r\n            },function(error){\r\n                 if (error === null) {\r\n\r\n                } else {\r\n                    console.log(error);\r\n                }\r\n            });\r\n            \r\n        }\r\n\r\n        getRate(rate:string){\r\n            var self=this;\r\n            self.rateValue='0' + ':' + rate;\r\n        }\r\n\r\n        toggleCheck(){\r\n            var self=this;\r\n            self.isChecked = self.isChecked == true ? false : true;\r\n        }\r\n\r\n        postRateInfo(ratingNameField:string,ratingTypeIDField:string,value:string){\r\n            var self=this;\r\n            if (ratingNameField === 'Work Quality'){\r\n                self.workQuality = ratingTypeIDField+':'+value;\r\n            } else if (ratingNameField === 'Time Punctuality'){\r\n                self.timePunctuality = ratingTypeIDField + ':' + value;\r\n            }\r\n        }\r\n\r\n        redirectTo(href: any) {\r\n\r\n            $('#PDone').modal('toggle');\r\n            this.$state.go(href);\r\n        }\r\n\r\n        postRating(){\r\n            var self = this;\r\n            self.ratingCSV = self.rateValue + '|' + self.workQuality + '|' + self.timePunctuality;\r\n            self.reviewCSV = '-1:-1:' + self.commentTxt + ':' + self.dropDownVal;\r\n            console.log(self.ratingCSV);\r\n            console.log(self.reviewCSV);\r\n            var data={\r\n                \"AppID\":self.appointmentID,\r\n                \"RatingByID\":self.$window.localStorage.getItem('CustomerID'),\r\n                \"RatingCSV\":self.ratingCSV,\r\n                \"RatingToID\":self.providerId,\r\n                \"ReviewCSV\":self.reviewCSV\r\n            }\r\n            self.CustomerHttp.post(data,'/AddRating').then(function(res){\r\n                self.messages = 'Thank you for rating';\r\n                $('#PDone').modal();\r\n            },function(error){\r\n\r\n            });\r\n            \r\n        }\r\n       \r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.AddProviderReview', []).controller('AddProviderReview', AddProviderReviewController);\r\n\r\n}"],"sourceRoot":"/source/"}