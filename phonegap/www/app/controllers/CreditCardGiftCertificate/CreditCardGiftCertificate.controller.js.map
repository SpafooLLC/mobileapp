{"version":3,"sources":["controllers/CreditCardGiftCertificate/CreditCardGiftCertificate.controller.ts"],"names":[],"mappings":"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","file":"controllers/CreditCardGiftCertificate/CreditCardGiftCertificate.controller.js","sourcesContent":["module CreditCardGiftCertificateController {\r\n    export interface ICreditCardGiftCertificate {\r\n        SubmitCreditCardInfo(UID: string,\r\n            CCNumber: string,\r\n            Expiry: string,\r\n            CVV: string,\r\n            Email: string\r\n        ): void\r\n\r\n\r\n    }\r\n\r\n\r\n    class CreditCardGiftCertificateController {\r\n        messages: string;\r\n        Succmesg: string;\r\n        from: string;\r\n        number: number;\r\n        data: any;\r\n        UserEmail: any;\r\n        UserName: any;\r\n        numbercvv: number;\r\n        isChecked: boolean;\r\n        CardName: any;\r\n        GiftToFirstName: any; GiftToLastName: any; GiftToEmailID: any; Message: any; Amount: any;\r\n        static $inject = ['$q', '$state', '$ionicPopup', '$ionicLoading', '$scope', '$location', 'CustomerHttp', '$window', 'toaster', 'SharedHttp', '$stateParams'];\r\n\r\n        constructor(\r\n            private $q: ng.IQService,\r\n            private $state: angular.ui.IStateService,\r\n            private $ionicPopup: ionic.popup.IonicPopupService,\r\n            private $ionicLoading: ionic.loading.IonicLoadingService,\r\n            private $scope: ng.IScope,\r\n            private $location: ng.ILocationService,\r\n            private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\r\n            private $window: ng.IWindowService,\r\n            private toaster: ngtoaster.IToasterService,\r\n            private SharedHttp: spafoo.httpsharedservice.ISharedHttp,\r\n\r\n            private $stateParams: angular.ui.IStateParamsService\r\n        ) {\r\n            this.init();\r\n        }\r\n\r\n        init() {\r\n            var self = this;\r\n            self.GiftToFirstName = self.$stateParams.GiftToFirstName;\r\n            self.GiftToLastName = self.$stateParams.GiftToLastName;\r\n            self.GiftToEmailID = self.$stateParams.GiftToEmailID;\r\n            self.Message = self.$stateParams.Message;\r\n            self.Amount = self.$stateParams.Amount;\r\n            self.CardName = self.GiftToFirstName + \" \" + self.GiftToLastName;\r\n            self.isChecked = false;\r\n            var status = self.$window.localStorage.getItem('LoginStatus');\r\n            if (status === null || status === 'false' || status === false || status === undefined || status === 'undefined' || status === '') {\r\n                if (self.from != 'reg') {\r\n                    self.$state.go('login');\r\n                }\r\n\r\n            }\r\n            self.years = [];\r\n            var date = new Date();\r\n            var year = parseInt(date.getFullYear());\r\n            self.year = year;\r\n            for (var i = 0; i < 20; i++) {\r\n                self.years.push(year++);\r\n            }\r\n\r\n        }\r\n\r\n        SubmitCreditCardInfo(CData: any) {\r\n            var self = this;\r\n            if (this.DoValidation(CData)) {\r\n                var data: any;\r\n                data = {};\r\n                data.Expiry = CData.Month + \"/\" + CData.Year;\r\n                data.CCNumber = CData.CCNumber;\r\n                data.CardCode = CData.CVV;\r\n                data.Amount = self.Amount;\r\n                data.GiftToFirstName = self.GiftToFirstName;\r\n                data.GiftToLastName = self.GiftToLastName;\r\n                data.GiftToEmailID = self.GiftToEmailID;\r\n                data.Message = self.Message;\r\n                data.SenderUserID =self.$window.localStorage.getItem('CustomerID');\r\n                self.CustomerHttp.post(data, '/PostGiftCertificate').then(function (response) {\r\n                    self.Succmesg = response.Success;\r\n                    $(\"#PSuccess\").modal();\r\n                }, function (error) { });\r\n\r\n            }\r\n        }\r\n        redirectTo(href: any) {\r\n            this.SharedHttp.redirectTo(href, 'PSuccess');\r\n        }\r\n\r\n        DoValidation(Regdata: any) {\r\n            var self = this;\r\n            if (Regdata == undefined) {\r\n                self.messages = \"Please enter name on credit card.\";\r\n                $(\"#PDone\").modal();\r\n                return false;\r\n            }\r\n\r\n            if (Regdata.CardName === null || Regdata.CardName === '' || Regdata.CardName == undefined) {\r\n                self.messages = \"Please enter name on credit card..\";\r\n                $(\"#PDone\").modal();\r\n                return false;\r\n            }\r\n\r\n            if (Regdata.CCNumber === null || Regdata.CCNumber === '' || Regdata.CCNumber == undefined) {\r\n                self.messages = \"Please Enter Credit Card Number.\";\r\n                $(\"#PDone\").modal();\r\n                return false;\r\n            } else {\r\n                if (String(Regdata.CCNumber).length < 14) {\r\n                    self.messages = \"The field length is invalid for Card Number.\";\r\n                    $(\"#PDone\").modal();\r\n                    return false;\r\n                }\r\n            }\r\n            if (Regdata.Month === null || Regdata.Month === '' || Regdata.Month == undefined) {\r\n                self.messages = \"Please Select Month.\";\r\n                $(\"#PDone\").modal();\r\n                return false;\r\n            }\r\n            if (Regdata.Year === null || Regdata.Year === '' || Regdata.Year == undefined) {\r\n                self.messages = \"Please Select Year.\";\r\n                $(\"#PDone\").modal();\r\n                return false;\r\n            } if (Regdata.CVV === null || Regdata.CVV === '' || Regdata.CVV == undefined) {\r\n                self.messages = \"Please Enter CVV.\";\r\n                $(\"#PDone\").modal();\r\n                return false;\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n            return true;\r\n        }\r\n        ValidateNumber(num: any, id: string) {\r\n            var self = this;\r\n            if (id == 'cnum') {\r\n                if (isNaN(num)) {\r\n                    self.data.CCNumber = self.number;\r\n                } else {\r\n                    self.data.CCNumber = num;\r\n                    self.number = num;\r\n                }\r\n            } else {\r\n                if (isNaN(num)) {\r\n                    self.data.CVV = self.numbercvv;\r\n                } else {\r\n                    self.data.CVV = num;\r\n                    self.numbercvv = num;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        checkStatus($event: any) {\r\n            var self = this;\r\n            if ($event.target.checked) {\r\n                self.isChecked = true;\r\n            } else {\r\n                self.isChecked = false;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    angular.module('spafoo.ctrl.CreditCardGiftCertificate', []).controller('CreditCardGiftCertificate', CreditCardGiftCertificateController);\r\n\r\n}"],"sourceRoot":"/source/"}