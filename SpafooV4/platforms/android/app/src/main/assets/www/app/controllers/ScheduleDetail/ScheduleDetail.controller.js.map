{"version":3,"sources":["controllers/ScheduleDetail/ScheduleDetail.controller.ts"],"names":[],"mappings":"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","file":"controllers/ScheduleDetail/ScheduleDetail.controller.js","sourcesContent":["module ScheduleDetailController {\n  class ScheduleDetailController {\n    AppointmentID: number;\n    ServiceData: any;\n    authTxnIDField: any;\n    amountField: any;\n    messages: any;\n    static $inject = [\n      \"$q\",\n      \"$state\",\n      \"$scope\",\n      \"$location\",\n      \"CustomerHttp\",\n      \"$window\",\n      \"SharedHttp\",\n    ];\n    constructor(\n      private $q: ng.IQService,\n      private $state: angular.ui.IStateService,\n      private $scope: ng.IScope,\n      private $location: ng.ILocationService,\n      private CustomerHttp: spafoo.httpservice.ICustomerScreenHttp,\n      private $window: ng.IWindowService,\n      private SharedHttp: spafoo.httpsharedservice.ISharedHttp\n    ) {\n      this.AppointmentID = this.$window.localStorage.getItem(\"AppointmentIDs\");\n      this.getScheduleDetail(this.AppointmentID);\n    }\n\n    getScheduleDetail(AppointmentID: any) {\n      var self = this;\n      self.CustomerHttp.get(\"/GetAppointment/\" + AppointmentID).then(\n        function (response: any) {\n          console.log(\"response\", response.GetAppointmentResult);\n          self.ServiceData = response.GetAppointmentResult;\n\n          var orderdt = self.SharedHttp.getFormatedDate(\n            self.ServiceData.forDateField,\n            \"weekday dd MMMM yyyy\"\n          );\n          self.ServiceData.orderDateField = orderdt;\n          self.ServiceData.atTimeField = self.SharedHttp.getFormatedTime(\n            self.ServiceData.atTimeField\n          );\n          self.ServiceData.DayField = orderdt.split(\" \")[1];\n          self.ServiceData.MonthField = orderdt.split(\" \")[2];\n          self.amountField = self.ServiceData.amountField;\n          self.authTxnIDField = self.ServiceData.authTxnIDField;\n          self.SharedHttp.GetAddressInfo(\n            self.ServiceData.appointmentIDField\n          ).then(function (e: any) {\n            self.ServiceData.addressField = self.SharedHttp.getAddressDetailRcd();\n          });\n          var serviceName = \"\";\n          $.each(self.ServiceData.servicesField, function (ig, sitem) {\n            //   serviceName += sitem.serviceNameField + \",\";\n            if (parseInt(sitem.qtyField) > 1) {\n              serviceName +=\n                sitem.serviceNameField + \"(\" + sitem.qtyField + \"),\";\n            } else {\n              serviceName += sitem.serviceNameField + \",\";\n            }\n          });\n          self.ServiceData.ServiceList = serviceName.substr(\n            0,\n            serviceName.lastIndexOf(\",\")\n          );\n          self.SharedHttp.GetUserInfo(self.ServiceData.providerIDField).then(\n            function (res: any) {\n              console.log(\"response from getUSerIbfo\", res);\n              debugger;\n              var temp = res.profileField.cellField;\n            //   self.ServiceData.cellField = res.profileField.cellField;\n              self.ServiceData.cellField =\n                temp[0] +\n                temp[1] +\n                temp[2] +\n                \"-\" +\n                temp[3] +\n                temp[4] +\n                temp[5] +\n                \"-\" +\n                temp[6] +\n                temp[7] +\n                temp[8] +\n                temp[9];\n\n              self.ServiceData.displayNameField =\n                res.firstNameField + \" \" + res.lastNameField[0] + \".\";\n              self.SharedHttp.getProfilePics(res.profileField.photoField).then(\n                function (imgres) {\n                  self.ServiceData.profilePic = imgres;\n                }\n              );\n            }\n          );\n        },\n        function (error) {}\n      );\n    }\n\n    CancelSchdule() {\n      var confirmations = confirm(\"Are you sure want to cancel ? \");\n      if (confirmations) {\n        var self = this;\n        var PostData = {\n          AID: this.AppointmentID,\n          TxnID: this.authTxnIDField,\n          Amount: this.amountField,\n        };\n        //  alert(JSON.stringify(PostData));\n        self.CustomerHttp.post(PostData, \"/RefundCard\").then(\n          function (response: any) {\n            self.messages = JSON.parse(response).messages.message[0].text;\n            $(\"#PDone\").modal();\n          },\n          function (error) {\n            //alert(error)\n          }\n        );\n      }\n    }\n\n    dismissAndThen() {\n      // return false;\n      this.$state.go(\"MySchedule\");\n    }\n  }\n\n  angular\n    .module(\"spafoo.ctrl.ScheduleDetail\", [])\n    .controller(\"ScheduleDetail\", ScheduleDetailController);\n}\n"],"sourceRoot":"/source/"}